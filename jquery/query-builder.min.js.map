{"version":3,"names":["root","factory","define","amd","module","exports","require","jQuery","this","$","extendext","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","arrayMode","toLowerCase","Array","isArray","concat","extend","forEach","e","type","indexOf","push","isPlainObject","undefined","QueryBuilder","$el","queryBuilder","settings","DEFAULTS","model","Model","status","id","generated_id","group_id","rule_id","has_optgroup","has_operator_optgroup","filters","icons","operators","templates","plugins","lang","regional","Utils","error","lang_code","allow_groups","Object","keys","tpl","Error","attr","Math","floor","random","addClass","checkFilters","checkOperators","bindEvents","initPlugins","prototype","trigger","event","Event","_tojQueryEvent","builder","triggerHandler","slice","call","change","value","on","cb","off","once","one","filter","split","map","join","types","string","integer","double","date","time","datetime","boolean","inputs","modifiable_options","selectors","group_container","rule_container","filter_container","operator_container","value_container","error_container","condition_container","rule_header","group_header","group_actions","rule_actions","rules_list","group_condition","rule_filter","rule_operator","rule_value","add_rule","delete_rule","add_group","delete_group","OPERATORS","equal","nb_inputs","multiple","apply_to","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null","sort_filters","display_errors","allow_empty","conditions","default_condition","inputs_separator","select_placeholder","display_empty_filter","default_filter","optgroups","default_rule_flags","filter_readonly","operator_readonly","value_readonly","no_delete","default_group_flags","condition_readonly","no_add_rule","no_add_group","group","rule","filterSelect","operatorSelect","ruleValueSelect","ruleValueCheck","remove_group","remove_rule","defaults","fct","def","methods","tmp","plugin","getPluginOptions","property","init","rules","setRules","setRoot","definedFilters","input","operator","field","label","optgroup","values","cleanValues","iterateOptions","bind","groupSort","placeholder","placeholder_value","entry","sort","self","a","b","translate","localeCompare","definedOperators","Selectors","is","$group","closest","getModel","condition","val","$rule","getFilterById","getOperatorByType","addRule","deleteRule","addGroup","deleteGroup","drop","node","remove","refreshGroupsConditions","add","parent","index","prependTo","find","insertAfter","move","detach","update","oldValue","Rule","updateError","applyRuleFlags","updateRuleFilter","updateRuleOperator","updateRuleValue","applyGroupFlags","updateGroupCondition","data","flags","nextGroupId","parseHTML","getGroupTemplate","append","Group","each","bootstrap","Tooltip","placement","level","isDefaultPrevented","isRoot","del","previousCondition","$this","prop","toggleClass","walk","nextRuleId","getRuleTemplate","createRuleFilters","$filterSelect","getRuleFilterSelect","html","createRuleOperators","$operatorContainer","empty","getOperators","$operatorSelect","getRuleOperatorSelect","default_operator","__","createRuleInput","$valueContainer","$inputs","$ruleInput","getRuleInput","trim","document","css","input_event","_updating_input","_updating_value","getRuleInputValue","plugin_config","default_value","previousFilter","previousOperator","hide","previousValue","setRuleInputValue","clearErrors","removeClass","errorMessage","fmt","eq","triggerValidationError","destroy","removeAttr","clear","removeData","reset","setOptions","opt","Node","validate","skip_empty","valid","parse","done","errors","validateValue","res","getRules","get_flags","allow_invalid","out","groupData","getGroupFlags","isEmptyObject","ruleData","getRuleFlags","parseGroupFlags","item","parseRuleFlags","validation","result","callback","_validateValue","tempValue","allow_empty_value","j","min","parseInt","getValidationMessage","max","format","RegExp","test","isNaN","parseFloat","step","v","toPrecision","window","DateTime","fromFormat","isValid","l","doThrow","valueGetter","$value","escapeElementId","value_separator","subval","changeType","valueSetter","readonly","all","ret","key","category","translation","messages","icon","vertical","h","getRuleValueSelect","getRuleValueCheck","value_id","size","rows","utils","str","args","replace","m","message","err","console","ew","parseNumber","parseDateTime","toSQLDate","convertToBool","escapeString","additionalEscape","escaped","s","escapeRegExp","$0","$1","$2","items","newItems","idx","lastIndexOf","splice","defineModelProperties","obj","fields","defineProperty","enumerable","get","set","apply","getPos","getNodePos","removeNode","moveAfter","moveAtBegin","moveAtEnd","insertNode","create","constructor","reverse","cbRule","cbGroup","context","c","stop","recursive","getStmtConfig","stmt","config","match","fn","option","setFilters","deleteOrphans","filtersIds","checkOrphans","updateBuilder","updateDisabledFilters","selectpicker","addFilter","newFilters","position","some","removeFilter","filterIds","mode","$p","description","getFilterDescription","appendTo","$b","after","dir","container","title","getInstance","show","invert","display_rules_button","invert_rules","disable_template","$h","silent_fail","operatorOpposites","conditionOpposites","AND","OR","tempOpts","no_invert","not","updateGroupNot","before","json","toUpperCase","operation","SQLParser","nodes","Op","$nor","applyToFilter","select2","filterSelect2Options","applyToOperator","operatorSelect2Options","applyToValue","valueSelect2Options","boolean_as_integer","sqlOperators","op","sep","mod","escape","sqlRuleOperator","LIKE","IN","BETWEEN","IS","sqlStatements","question_mark","params","run","numbered","char","named","indexes","sqlRuleStatement","esc","sql","regex1","regex2","getSQL","nl","parts","ope","sqlFn","ruleExpression","groupExpression","getRulesFromSQL","query","parsed","where","curr","flatten","next","left","right","sqlrl","opVal","JSON","stringify","finalValue","searchChars","getSQLFieldID","setRulesFromSQL","matchingFilters","used_filters","applyDisabledFilters","clearDisabledFilters","unique","filterId","groups","__locale","__author","no_filter","empty_group","radio_empty","checkbox_empty","select_empty","string_empty","string_exceed_min_length","string_exceed_max_length","string_invalid_format","number_nan","number_not_integer","number_not_double","number_exceed_min","number_exceed_max","number_wrong_step","number_between_invalid","datetime_empty","datetime_invalid","datetime_exceed_min","datetime_exceed_max","datetime_between_invalid","boolean_not_valid","operator_not_multiple","NOT"],"sources":["../template/php2026/jquery/query-builder.js"],"sourcesContent":["/*!\n * jQuery.extendext 1.0.0\n *\n * Copyright 2014-2019 Damien \"Mistic\" Sorel (http://www.strangeplanet.fr)\n * Licensed under MIT (http://opensource.org/licenses/MIT)\n *\n * Based on jQuery.extend by jQuery Foundation, Inc. and other contributors\n */\n\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define('jquery-extendext', ['jquery'], factory);\n    }\n    else if (typeof module === 'object' && module.exports) {\n        module.exports = factory(require('jquery'));\n    }\n    else {\n        factory(root.jQuery);\n    }\n}(this, function ($) {\n    \"use strict\";\n\n    $.extendext = function () {\n        var options, name, src, copy, copyIsArray, clone,\n            target = arguments[0] || {},\n            i = 1,\n            length = arguments.length,\n            deep = false,\n            arrayMode = 'default';\n\n        // Handle a deep copy situation\n        if (typeof target === \"boolean\") {\n            deep = target;\n\n            // Skip the boolean and the target\n            target = arguments[i++] || {};\n        }\n\n        // Handle array mode parameter\n        if (typeof target === \"string\") {\n            arrayMode = target.toLowerCase();\n            if (arrayMode !== 'concat' && arrayMode !== 'replace' && arrayMode !== 'extend') {\n                arrayMode = 'default';\n            }\n\n            // Skip the string param\n            target = arguments[i++] || {};\n        }\n\n        // Handle case when target is a string or something (possible in deep copy)\n        if (typeof target !== 'object' && typeof target !== 'function') {\n            target = {};\n        }\n\n        // Extend jQuery itself if only one argument is passed\n        if (i === length) {\n            target = this;\n            i--;\n        }\n\n        for (; i < length; i++) {\n            // Only deal with non-null/undefined values\n            if ((options = arguments[i]) !== null) {\n                // Special operations for arrays\n                if (Array.isArray(options) && arrayMode !== 'default') {\n                    clone = target && Array.isArray(target) ? target : [];\n\n                    switch (arrayMode) {\n                    case 'concat':\n                        target = clone.concat($.extend(deep, [], options));\n                        break;\n\n                    case 'replace':\n                        target = $.extend(deep, [], options);\n                        break;\n\n                    case 'extend':\n                        options.forEach(function (e, i) {\n                            if (typeof e === 'object') {\n                                var type = Array.isArray(e) ? [] : {};\n                                clone[i] = $.extendext(deep, arrayMode, clone[i] || type, e);\n\n                            } else if (clone.indexOf(e) === -1) {\n                                clone.push(e);\n                            }\n                        });\n\n                        target = clone;\n                        break;\n                    }\n\n                } else {\n                    // Extend the base object\n                    for (name in options) {\n                        copy = options[name];\n\n                        // Prevent never-ending loop\n                        if (name === '__proto__' || target === copy) {\n                            continue;\n                        }\n\n                        // Recurse if we're merging plain objects or arrays\n                        if (deep && copy && ( $.isPlainObject(copy) ||\n                            (copyIsArray = Array.isArray(copy)) )) {\n                            src = target[name];\n\n                            // Ensure proper type for the source value\n                            if ( copyIsArray && !Array.isArray( src ) ) {\n                                clone = [];\n                            } else if ( !copyIsArray && !$.isPlainObject( src ) ) {\n                                clone = {};\n                            } else {\n                                clone = src;\n                            }\n                            copyIsArray = false;\n\n                            // Never move original objects, clone them\n                            target[name] = $.extendext(deep, arrayMode, clone, copy);\n\n                            // Don't bring in undefined values\n                        } else if (copy !== undefined) {\n                            target[name] = copy;\n                        }\n                    }\n                }\n            }\n        }\n\n        // Return the modified object\n        return target;\n    };\n}));\n\n\n/*!\n * jQuery QueryBuilder 2.7.2\n * Copyright 2014-2025 Damien \"Mistic\" Sorel (http://www.strangeplanet.fr)\n * Licensed under MIT (https://opensource.org/licenses/MIT)\n */\n\n(function(root, factory) {\n    if (typeof define == 'function' && define.amd) {\n        define('query-builder', ['jquery', 'jquery-extendext'], factory);\n    }\n    else if (typeof module === 'object' && module.exports) {\n        module.exports = factory(require('jquery'), require('jquery-extendext'));\n    }\n    else {\n        factory(root.jQuery);\n    }\n}(this, function($) {\n\"use strict\";\n\n/**\n * @typedef {object} Filter\n * @memberof QueryBuilder\n * @description See {@link http://querybuilder.js.org/index.html#filters}\n */\n\n/**\n * @typedef {object} Operator\n * @memberof QueryBuilder\n * @description See {@link http://querybuilder.js.org/index.html#operators}\n */\n\n/**\n * @param {jQuery} $el\n * @param {object} options - see {@link http://querybuilder.js.org/#options}\n * @constructor\n */\nvar QueryBuilder = function($el, options) {\n    $el[0].queryBuilder = this;\n\n    /**\n     * Element container\n     * @member {jQuery}\n     * @readonly\n     */\n    this.$el = $el;\n\n    /**\n     * Configuration object\n     * @member {object}\n     * @readonly\n     */\n    this.settings = $.extendext(true, 'replace', {}, QueryBuilder.DEFAULTS, options);\n\n    /**\n     * Internal model\n     * @member {Model}\n     * @readonly\n     */\n    this.model = new Model();\n\n    /**\n     * Internal status\n     * @member {object}\n     * @property {string} id - id of the container\n     * @property {boolean} generated_id - if the container id has been generated\n     * @property {int} group_id - current group id\n     * @property {int} rule_id - current rule id\n     * @property {boolean} has_optgroup - if filters have optgroups\n     * @property {boolean} has_operator_optgroup - if operators have optgroups\n     * @readonly\n     * @private\n     */\n    this.status = {\n        id: null,\n        generated_id: false,\n        group_id: 0,\n        rule_id: 0,\n        has_optgroup: false,\n        has_operator_optgroup: false\n    };\n\n    /**\n     * List of filters\n     * @member {QueryBuilder.Filter[]}\n     * @readonly\n     */\n    this.filters = this.settings.filters;\n\n    /**\n     * List of icons\n     * @member {object.<string, string>}\n     * @readonly\n     */\n    this.icons = this.settings.icons;\n\n    /**\n     * List of operators\n     * @member {QueryBuilder.Operator[]}\n     * @readonly\n     */\n    this.operators = this.settings.operators;\n\n    /**\n     * List of templates\n     * @member {object.<string, function>}\n     * @readonly\n     */\n    this.templates = this.settings.templates;\n\n    /**\n     * Plugins configuration\n     * @member {object.<string, object>}\n     * @readonly\n     */\n    this.plugins = this.settings.plugins;\n\n    /**\n     * Translations object\n     * @member {object}\n     * @readonly\n     */\n    this.lang = null;\n\n    // translations : english << 'lang_code' << custom\n    if (QueryBuilder.regional['en'] === undefined) {\n        Utils.error('Config', '\"i18n/en.js\" not loaded.');\n    }\n    this.lang = $.extendext(true, 'replace', {}, QueryBuilder.regional['en'], QueryBuilder.regional[this.settings.lang_code], this.settings.lang);\n\n    // \"allow_groups\" can be boolean or int\n    if (this.settings.allow_groups === false) {\n        this.settings.allow_groups = 0;\n    }\n    else if (this.settings.allow_groups === true) {\n        this.settings.allow_groups = -1;\n    }\n\n    // init templates\n    Object.keys(this.templates).forEach(function(tpl) {\n        if (!this.templates[tpl]) {\n            this.templates[tpl] = QueryBuilder.templates[tpl];\n        }\n        if (typeof this.templates[tpl] !== 'function') {\n            throw new Error(`Template ${tpl} must be a function`);\n        }\n    }, this);\n\n    // ensure we have a container id\n    if (!this.$el.attr('id')) {\n        this.$el.attr('id', 'qb_' + Math.floor(Math.random() * 99999));\n        this.status.generated_id = true;\n    }\n    this.status.id = this.$el.attr('id');\n\n    // INIT\n    this.$el.addClass('query-builder form-inline');\n\n    this.filters = this.checkFilters(this.filters);\n    this.operators = this.checkOperators(this.operators);\n    this.bindEvents();\n    this.initPlugins();\n};\n\n$.extend(QueryBuilder.prototype, /** @lends QueryBuilder.prototype */ {\n    /**\n     * Triggers an event on the builder container\n     * @param {string} type\n     * @returns {$.Event}\n     */\n    trigger: function(type) {\n        var event = new $.Event(this._tojQueryEvent(type), {\n            builder: this\n        });\n\n        this.$el.triggerHandler(event, Array.prototype.slice.call(arguments, 1));\n\n        return event;\n    },\n\n    /**\n     * Triggers an event on the builder container and returns the modified value\n     * @param {string} type\n     * @param {*} value\n     * @returns {*}\n     */\n    change: function(type, value) {\n        var event = new $.Event(this._tojQueryEvent(type, true), {\n            builder: this,\n            value: value\n        });\n\n        this.$el.triggerHandler(event, Array.prototype.slice.call(arguments, 2));\n\n        return event.value;\n    },\n\n    /**\n     * Attaches an event listener on the builder container\n     * @param {string} type\n     * @param {function} cb\n     * @returns {QueryBuilder}\n     */\n    on: function(type, cb) {\n        this.$el.on(this._tojQueryEvent(type), cb);\n        return this;\n    },\n\n    /**\n     * Removes an event listener from the builder container\n     * @param {string} type\n     * @param {function} [cb]\n     * @returns {QueryBuilder}\n     */\n    off: function(type, cb) {\n        this.$el.off(this._tojQueryEvent(type), cb);\n        return this;\n    },\n\n    /**\n     * Attaches an event listener called once on the builder container\n     * @param {string} type\n     * @param {function} cb\n     * @returns {QueryBuilder}\n     */\n    once: function(type, cb) {\n        this.$el.one(this._tojQueryEvent(type), cb);\n        return this;\n    },\n\n    /**\n     * Appends `.queryBuilder` and optionally `.filter` to the events names\n     * @param {string} name\n     * @param {boolean} [filter=false]\n     * @returns {string}\n     * @private\n     */\n    _tojQueryEvent: function(name, filter) {\n        return name.split(' ').map(function(type) {\n            return type + '.queryBuilder' + (filter ? '.filter' : '');\n        }).join(' ');\n    }\n});\n\n\n/**\n * Allowed types and their internal representation\n * @type {object.<string, string>}\n * @readonly\n * @private\n */\nQueryBuilder.types = {\n    'string':   'string',\n    'integer':  'number',\n    'double':   'number',\n    'date':     'datetime',\n    'time':     'datetime',\n    'datetime': 'datetime',\n    'boolean':  'boolean'\n};\n\n/**\n * Allowed inputs\n * @type {string[]}\n * @readonly\n * @private\n */\nQueryBuilder.inputs = [\n    'text',\n    'number',\n    'textarea',\n    'radio',\n    'checkbox',\n    'select'\n];\n\n/**\n * Runtime modifiable options with `setOptions` method\n * @type {string[]}\n * @readonly\n * @private\n */\nQueryBuilder.modifiable_options = [\n    'display_errors',\n    'allow_groups',\n    'allow_empty',\n    'default_condition',\n    'default_filter'\n];\n\n/**\n * CSS selectors for common components\n * @type {object.<string, string>}\n * @readonly\n */\nQueryBuilder.selectors = {\n    group_container:      '.rules-group-container',\n    rule_container:       '.rule-container',\n    filter_container:     '.rule-filter-container',\n    operator_container:   '.rule-operator-container',\n    value_container:      '.rule-value-container',\n    error_container:      '.error-container',\n    condition_container:  '.rules-group-header .group-conditions',\n\n    rule_header:          '.rule-header',\n    group_header:         '.rules-group-header',\n    group_actions:        '.group-actions',\n    rule_actions:         '.rule-actions',\n\n    rules_list:           '.rules-group-body>.rules-list',\n\n    group_condition:      '.rules-group-header [name$=_cond]',\n    rule_filter:          '.rule-filter-container [name$=_filter]',\n    rule_operator:        '.rule-operator-container [name$=_operator]',\n    rule_value:           '.rule-value-container [name*=_value_]',\n\n    add_rule:             '[data-add=rule]',\n    delete_rule:          '[data-delete=rule]',\n    add_group:            '[data-add=group]',\n    delete_group:         '[data-delete=group]'\n};\n\n/**\n * Template strings (see template.js)\n * @type {object.<string, string>}\n * @readonly\n */\nQueryBuilder.templates = {};\n\n/**\n * Localized strings (see i18n/)\n * @type {object.<string, object>}\n * @readonly\n */\nQueryBuilder.regional = {};\n\n/**\n * Default operators\n * @type {object.<string, object>}\n * @readonly\n */\nQueryBuilder.OPERATORS = {\n    equal:            { type: 'equal',            nb_inputs: 1, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] },\n    not_equal:        { type: 'not_equal',        nb_inputs: 1, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] },\n    in:               { type: 'in',               nb_inputs: 1, multiple: true,  apply_to: ['string', 'number', 'datetime'] },\n    not_in:           { type: 'not_in',           nb_inputs: 1, multiple: true,  apply_to: ['string', 'number', 'datetime'] },\n    less:             { type: 'less',             nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    less_or_equal:    { type: 'less_or_equal',    nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    greater:          { type: 'greater',          nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    greater_or_equal: { type: 'greater_or_equal', nb_inputs: 1, multiple: false, apply_to: ['number', 'datetime'] },\n    between:          { type: 'between',          nb_inputs: 2, multiple: false, apply_to: ['number', 'datetime'] },\n    not_between:      { type: 'not_between',      nb_inputs: 2, multiple: false, apply_to: ['number', 'datetime'] },\n    begins_with:      { type: 'begins_with',      nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    not_begins_with:  { type: 'not_begins_with',  nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    contains:         { type: 'contains',         nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    not_contains:     { type: 'not_contains',     nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    ends_with:        { type: 'ends_with',        nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    not_ends_with:    { type: 'not_ends_with',    nb_inputs: 1, multiple: false, apply_to: ['string'] },\n    is_empty:         { type: 'is_empty',         nb_inputs: 0, multiple: false, apply_to: ['string'] },\n    is_not_empty:     { type: 'is_not_empty',     nb_inputs: 0, multiple: false, apply_to: ['string'] },\n    is_null:          { type: 'is_null',          nb_inputs: 0, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] },\n    is_not_null:      { type: 'is_not_null',      nb_inputs: 0, multiple: false, apply_to: ['string', 'number', 'datetime', 'boolean'] }\n};\n\n/**\n * Default configuration\n * @type {object}\n * @readonly\n */\nQueryBuilder.DEFAULTS = {\n    filters: [],\n    plugins: [],\n\n    sort_filters: false,\n    display_errors: true,\n    allow_groups: -1,\n    allow_empty: false,\n    conditions: ['AND', 'OR'],\n    default_condition: 'AND',\n    inputs_separator: ' , ',\n    select_placeholder: '------',\n    display_empty_filter: true,\n    default_filter: null,\n    optgroups: {},\n\n    default_rule_flags: {\n        filter_readonly: false,\n        operator_readonly: false,\n        value_readonly: false,\n        no_delete: false\n    },\n\n    default_group_flags: {\n        condition_readonly: false,\n        no_add_rule: false,\n        no_add_group: false,\n        no_delete: false\n    },\n\n    templates: {\n        group: null,\n        rule: null,\n        filterSelect: null,\n        operatorSelect: null,\n        ruleValueSelect: null,\n        ruleValueCheck: null\n    },\n\n    lang_code: 'en',\n    lang: {},\n\n    operators: [\n        'equal',\n        'not_equal',\n        'in',\n        'not_in',\n        'less',\n        'less_or_equal',\n        'greater',\n        'greater_or_equal',\n        'between',\n        'not_between',\n        'begins_with',\n        'not_begins_with',\n        'contains',\n        'not_contains',\n        'ends_with',\n        'not_ends_with',\n        'is_empty',\n        'is_not_empty',\n        'is_null',\n        'is_not_null'\n    ],\n\n    icons: {\n        add_group:    'fa-solid fa-circle-plus',\n        add_rule:     'fa-solid fa-plus',\n        remove_group: 'fa-solid fa-xmark',\n        remove_rule:  'fa-solid fa-xmark',\n        error:        'fa-solid fa-circle-exclamation'\n    }\n};\n\n\n/**\n * @module plugins\n */\n\n/**\n * Definition of available plugins\n * @type {object.<String, object>}\n */\nQueryBuilder.plugins = {};\n\n/**\n * Gets or extends the default configuration\n * @param {object} [options] - new configuration\n * @returns {undefined|object} nothing or configuration object (copy)\n */\nQueryBuilder.defaults = function(options) {\n    if (typeof options == 'object') {\n        $.extendext(true, 'replace', QueryBuilder.DEFAULTS, options);\n    }\n    else if (typeof options == 'string') {\n        if (typeof QueryBuilder.DEFAULTS[options] == 'object') {\n            return $.extend(true, {}, QueryBuilder.DEFAULTS[options]);\n        }\n        else {\n            return QueryBuilder.DEFAULTS[options];\n        }\n    }\n    else {\n        return $.extend(true, {}, QueryBuilder.DEFAULTS);\n    }\n};\n\n/**\n * Registers a new plugin\n * @param {string} name\n * @param {function} fct - init function\n * @param {object} [def] - default options\n */\nQueryBuilder.define = function(name, fct, def) {\n    QueryBuilder.plugins[name] = {\n        fct: fct,\n        def: def || {}\n    };\n};\n\n/**\n * Adds new methods to QueryBuilder prototype\n * @param {object.<string, function>} methods\n */\nQueryBuilder.extend = function(methods) {\n    $.extend(QueryBuilder.prototype, methods);\n};\n\n/**\n * Initializes plugins for an instance\n * @throws ConfigError\n * @private\n */\nQueryBuilder.prototype.initPlugins = function() {\n    if (!this.plugins) {\n        return;\n    }\n\n    if (Array.isArray(this.plugins)) {\n        var tmp = {};\n        this.plugins.forEach(function(plugin) {\n            tmp[plugin] = null;\n        });\n        this.plugins = tmp;\n    }\n\n    Object.keys(this.plugins).forEach(function(plugin) {\n        if (plugin in QueryBuilder.plugins) {\n            this.plugins[plugin] = $.extend(true, {},\n                QueryBuilder.plugins[plugin].def,\n                this.plugins[plugin] || {}\n            );\n\n            QueryBuilder.plugins[plugin].fct.call(this, this.plugins[plugin]);\n        }\n        else {\n            Utils.error('Config', 'Unable to find plugin \"{0}\"', plugin);\n        }\n    }, this);\n};\n\n/**\n * Returns the config of a plugin, if the plugin is not loaded, returns the default config.\n * @param {string} name\n * @param {string} [property]\n * @throws ConfigError\n * @returns {*}\n */\nQueryBuilder.prototype.getPluginOptions = function(name, property) {\n    var plugin;\n    if (this.plugins && this.plugins[name]) {\n        plugin = this.plugins[name];\n    }\n    else if (QueryBuilder.plugins[name]) {\n        plugin = QueryBuilder.plugins[name].def;\n    }\n\n    if (plugin) {\n        if (property) {\n            return plugin[property];\n        }\n        else {\n            return plugin;\n        }\n    }\n    else {\n        Utils.error('Config', 'Unable to find plugin \"{0}\"', name);\n    }\n};\n\n\n/**\n * Final initialisation of the builder\n * @param {object} [rules]\n * @fires QueryBuilder.afterInit\n * @private\n */\nQueryBuilder.prototype.init = function(rules) {\n    /**\n     * When the initilization is done, just before creating the root group\n     * @event afterInit\n     * @memberof QueryBuilder\n     */\n    this.trigger('afterInit');\n\n    if (rules) {\n        this.setRules(rules);\n        delete this.settings.rules;\n    }\n    else {\n        this.setRoot(true);\n    }\n};\n\n/**\n * Checks the configuration of each filter\n * @param {QueryBuilder.Filter[]} filters\n * @returns {QueryBuilder.Filter[]}\n * @throws ConfigError\n */\nQueryBuilder.prototype.checkFilters = function(filters) {\n    var definedFilters = [];\n\n    if (!filters || filters.length === 0) {\n        Utils.error('Config', 'Missing filters list');\n    }\n\n    filters.forEach(function(filter, i) {\n        if (!filter.id) {\n            Utils.error('Config', 'Missing filter {0} id', i);\n        }\n        if (definedFilters.indexOf(filter.id) != -1) {\n            Utils.error('Config', 'Filter \"{0}\" already defined', filter.id);\n        }\n        definedFilters.push(filter.id);\n\n        if (!filter.type) {\n            filter.type = 'string';\n        }\n        else if (!QueryBuilder.types[filter.type]) {\n            Utils.error('Config', 'Invalid type \"{0}\"', filter.type);\n        }\n\n        if (!filter.input) {\n            filter.input = QueryBuilder.types[filter.type] === 'number' ? 'number' : 'text';\n        }\n        else if (typeof filter.input != 'function' && QueryBuilder.inputs.indexOf(filter.input) == -1) {\n            Utils.error('Config', 'Invalid input \"{0}\"', filter.input);\n        }\n\n        if (filter.operators) {\n            filter.operators.forEach(function(operator) {\n                if (typeof operator != 'string') {\n                    Utils.error('Config', 'Filter operators must be global operators types (string)');\n                }\n            });\n        }\n\n        if (!filter.field) {\n            filter.field = filter.id;\n        }\n        if (!filter.label) {\n            filter.label = filter.field;\n        }\n\n        if (!filter.optgroup) {\n            filter.optgroup = null;\n        }\n        else {\n            this.status.has_optgroup = true;\n\n            // register optgroup if needed\n            if (!this.settings.optgroups[filter.optgroup]) {\n                this.settings.optgroups[filter.optgroup] = filter.optgroup;\n            }\n        }\n\n        switch (filter.input) {\n            case 'radio':\n            case 'checkbox':\n                if (!filter.values || filter.values.length < 1) {\n                    Utils.error('Config', 'Missing filter \"{0}\" values', filter.id);\n                }\n                break;\n\n            case 'select':\n                var cleanValues = [];\n                filter.has_optgroup = false;\n\n                Utils.iterateOptions(filter.values, function(value, label, optgroup) {\n                    cleanValues.push({\n                        value: value,\n                        label: label,\n                        optgroup: optgroup || null\n                    });\n\n                    if (optgroup) {\n                        filter.has_optgroup = true;\n\n                        // register optgroup if needed\n                        if (!this.settings.optgroups[optgroup]) {\n                            this.settings.optgroups[optgroup] = optgroup;\n                        }\n                    }\n                }.bind(this));\n\n                if (filter.has_optgroup) {\n                    filter.values = Utils.groupSort(cleanValues, 'optgroup');\n                }\n                else {\n                    filter.values = cleanValues;\n                }\n\n                if (filter.placeholder) {\n                    if (filter.placeholder_value === undefined) {\n                        filter.placeholder_value = -1;\n                    }\n\n                    filter.values.forEach(function(entry) {\n                        if (entry.value == filter.placeholder_value) {\n                            Utils.error('Config', 'Placeholder of filter \"{0}\" overlaps with one of its values', filter.id);\n                        }\n                    });\n                }\n                break;\n        }\n    }, this);\n\n    if (this.settings.sort_filters) {\n        if (typeof this.settings.sort_filters == 'function') {\n            filters.sort(this.settings.sort_filters);\n        }\n        else {\n            var self = this;\n            filters.sort(function(a, b) {\n                return self.translate(a.label).localeCompare(self.translate(b.label));\n            });\n        }\n    }\n\n    if (this.status.has_optgroup) {\n        filters = Utils.groupSort(filters, 'optgroup');\n    }\n\n    return filters;\n};\n\n/**\n * Checks the configuration of each operator\n * @param {QueryBuilder.Operator[]} operators\n * @returns {QueryBuilder.Operator[]}\n * @throws ConfigError\n */\nQueryBuilder.prototype.checkOperators = function(operators) {\n    var definedOperators = [];\n\n    operators.forEach(function(operator, i) {\n        if (typeof operator == 'string') {\n            if (!QueryBuilder.OPERATORS[operator]) {\n                Utils.error('Config', 'Unknown operator \"{0}\"', operator);\n            }\n\n            operators[i] = operator = $.extendext(true, 'replace', {}, QueryBuilder.OPERATORS[operator]);\n        }\n        else {\n            if (!operator.type) {\n                Utils.error('Config', 'Missing \"type\" for operator {0}', i);\n            }\n\n            if (QueryBuilder.OPERATORS[operator.type]) {\n                operators[i] = operator = $.extendext(true, 'replace', {}, QueryBuilder.OPERATORS[operator.type], operator);\n            }\n\n            if (operator.nb_inputs === undefined || operator.apply_to === undefined) {\n                Utils.error('Config', 'Missing \"nb_inputs\" and/or \"apply_to\" for operator \"{0}\"', operator.type);\n            }\n        }\n\n        if (definedOperators.indexOf(operator.type) != -1) {\n            Utils.error('Config', 'Operator \"{0}\" already defined', operator.type);\n        }\n        definedOperators.push(operator.type);\n\n        if (!operator.optgroup) {\n            operator.optgroup = null;\n        }\n        else {\n            this.status.has_operator_optgroup = true;\n\n            // register optgroup if needed\n            if (!this.settings.optgroups[operator.optgroup]) {\n                this.settings.optgroups[operator.optgroup] = operator.optgroup;\n            }\n        }\n    }, this);\n\n    if (this.status.has_operator_optgroup) {\n        operators = Utils.groupSort(operators, 'optgroup');\n    }\n\n    return operators;\n};\n\n/**\n * Adds all events listeners to the builder\n * @private\n */\nQueryBuilder.prototype.bindEvents = function() {\n    var self = this;\n    var Selectors = QueryBuilder.selectors;\n\n    // group condition change\n    this.$el.on('change.queryBuilder', Selectors.group_condition, function() {\n        if ($(this).is(':checked')) {\n            var $group = $(this).closest(Selectors.group_container);\n            self.getModel($group).condition = $(this).val();\n        }\n    });\n\n    // rule filter change\n    this.$el.on('change.queryBuilder', Selectors.rule_filter, function() {\n        var $rule = $(this).closest(Selectors.rule_container);\n        self.getModel($rule).filter = self.getFilterById($(this).val());\n    });\n\n    // rule operator change\n    this.$el.on('change.queryBuilder', Selectors.rule_operator, function() {\n        var $rule = $(this).closest(Selectors.rule_container);\n        self.getModel($rule).operator = self.getOperatorByType($(this).val());\n    });\n\n    // add rule button\n    this.$el.on('click.queryBuilder', Selectors.add_rule, function() {\n        var $group = $(this).closest(Selectors.group_container);\n        self.addRule(self.getModel($group));\n    });\n\n    // delete rule button\n    this.$el.on('click.queryBuilder', Selectors.delete_rule, function() {\n        var $rule = $(this).closest(Selectors.rule_container);\n        self.deleteRule(self.getModel($rule));\n    });\n\n    if (this.settings.allow_groups !== 0) {\n        // add group button\n        this.$el.on('click.queryBuilder', Selectors.add_group, function() {\n            var $group = $(this).closest(Selectors.group_container);\n            self.addGroup(self.getModel($group));\n        });\n\n        // delete group button\n        this.$el.on('click.queryBuilder', Selectors.delete_group, function() {\n            var $group = $(this).closest(Selectors.group_container);\n            self.deleteGroup(self.getModel($group));\n        });\n    }\n\n    // model events\n    this.model.on({\n        'drop': function(e, node) {\n            node.$el.remove();\n            self.refreshGroupsConditions();\n        },\n        'add': function(e, parent, node, index) {\n            if (index === 0) {\n                node.$el.prependTo(parent.$el.find('>' + QueryBuilder.selectors.rules_list));\n            }\n            else {\n                node.$el.insertAfter(parent.rules[index - 1].$el);\n            }\n            self.refreshGroupsConditions();\n        },\n        'move': function(e, node, group, index) {\n            node.$el.detach();\n\n            if (index === 0) {\n                node.$el.prependTo(group.$el.find('>' + QueryBuilder.selectors.rules_list));\n            }\n            else {\n                node.$el.insertAfter(group.rules[index - 1].$el);\n            }\n            self.refreshGroupsConditions();\n        },\n        'update': function(e, node, field, value, oldValue) {\n            if (node instanceof Rule) {\n                switch (field) {\n                    case 'error':\n                        self.updateError(node);\n                        break;\n\n                    case 'flags':\n                        self.applyRuleFlags(node);\n                        break;\n\n                    case 'filter':\n                        self.updateRuleFilter(node, oldValue);\n                        break;\n\n                    case 'operator':\n                        self.updateRuleOperator(node, oldValue);\n                        break;\n\n                    case 'value':\n                        self.updateRuleValue(node, oldValue);\n                        break;\n                }\n            }\n            else {\n                switch (field) {\n                    case 'error':\n                        self.updateError(node);\n                        break;\n\n                    case 'flags':\n                        self.applyGroupFlags(node);\n                        break;\n\n                    case 'condition':\n                        self.updateGroupCondition(node, oldValue);\n                        break;\n                }\n            }\n        }\n    });\n};\n\n/**\n * Creates the root group\n * @param {boolean} [addRule=true] - adds a default empty rule\n * @param {object} [data] - group custom data\n * @param {object} [flags] - flags to apply to the group\n * @returns {Group} root group\n * @fires QueryBuilder.afterAddGroup\n */\nQueryBuilder.prototype.setRoot = function(addRule, data, flags) {\n    addRule = (addRule === undefined || addRule === true);\n\n    var group_id = this.nextGroupId();\n    var $group = $($.parseHTML(this.getGroupTemplate(group_id, 1)));\n\n    this.$el.append($group);\n    this.model.root = new Group(null, $group);\n    this.model.root.model = this.model;\n\n    this.model.root.data = data;\n    this.model.root.flags = $.extend({}, this.settings.default_group_flags, flags);\n    this.model.root.condition = this.settings.default_condition;\n\n    this.trigger('afterAddGroup', this.model.root);\n\n    this.model.root.$el.find(\"[data-bs-toggle=tooltip]\").each(function() {\n        new bootstrap.Tooltip(this, {\n            //*** container: this.$el[0], // Note: Do not put in this.$el[0] or the position of the tooltip will be affected after size change (e.g. after adding a rule)\n            trigger: \"hover\",\n            placement: \"bottom\"\n        });\n    });\n\n    if (addRule) {\n        this.addRule(this.model.root);\n    }\n\n    return this.model.root;\n};\n\n/**\n * Adds a new group\n * @param {Group} parent\n * @param {boolean} [addRule=true] - adds a default empty rule\n * @param {object} [data] - group custom data\n * @param {object} [flags] - flags to apply to the group\n * @returns {Group}\n * @fires QueryBuilder.beforeAddGroup\n * @fires QueryBuilder.afterAddGroup\n */\nQueryBuilder.prototype.addGroup = function(parent, addRule, data, flags) {\n    addRule = (addRule === undefined || addRule === true);\n\n    var level = parent.level + 1;\n\n    /**\n     * Just before adding a group, can be prevented.\n     * @event beforeAddGroup\n     * @memberof QueryBuilder\n     * @param {Group} parent\n     * @param {boolean} addRule - if an empty rule will be added in the group\n     * @param {int} level - nesting level of the group, 1 is the root group\n     */\n    var e = this.trigger('beforeAddGroup', parent, addRule, level);\n    if (e.isDefaultPrevented()) {\n        return null;\n    }\n\n    var group_id = this.nextGroupId();\n    var $group = $(this.getGroupTemplate(group_id, level));\n    var model = parent.addGroup($group);\n\n    model.data = data;\n    model.flags = $.extend({}, this.settings.default_group_flags, flags);\n    model.condition = this.settings.default_condition;\n\n    /**\n     * Just after adding a group\n     * @event afterAddGroup\n     * @memberof QueryBuilder\n     * @param {Group} group\n     */\n    this.trigger('afterAddGroup', model);\n\n    model.$el.find(\"[data-bs-toggle=tooltip]\").each(function() {\n        new bootstrap.Tooltip(this, {\n            //*** container: this.$el[0], // Note: Do not put in this.$el[0] or the position of the tooltip will be affected after size change (e.g. after adding a rule)\n            trigger: \"hover\",\n            placement: \"bottom\"\n        });\n    });\n\n    /**\n     * After any change in the rules\n     * @event rulesChanged\n     * @memberof QueryBuilder\n     */\n    this.trigger('rulesChanged');\n\n    if (addRule) {\n        this.addRule(model);\n    }\n\n    return model;\n};\n\n/**\n * Tries to delete a group. The group is not deleted if at least one rule is flagged `no_delete`.\n * @param {Group} group\n * @returns {boolean} if the group has been deleted\n * @fires QueryBuilder.beforeDeleteGroup\n * @fires QueryBuilder.afterDeleteGroup\n */\nQueryBuilder.prototype.deleteGroup = function(group) {\n    if (group.isRoot()) {\n        return false;\n    }\n\n    /**\n     * Just before deleting a group, can be prevented\n     * @event beforeDeleteGroup\n     * @memberof QueryBuilder\n     * @param {Group} parent\n     */\n    var e = this.trigger('beforeDeleteGroup', group);\n    if (e.isDefaultPrevented()) {\n        return false;\n    }\n\n    var del = true;\n\n    group.each('reverse', function(rule) {\n        del &= this.deleteRule(rule);\n    }, function(group) {\n        del &= this.deleteGroup(group);\n    }, this);\n\n    if (del) {\n        group.drop();\n\n        /**\n         * Just after deleting a group\n         * @event afterDeleteGroup\n         * @memberof QueryBuilder\n         */\n        this.trigger('afterDeleteGroup');\n\n        this.trigger('rulesChanged');\n    }\n\n    return del;\n};\n\n/**\n * Performs actions when a group's condition changes\n * @param {Group} group\n * @param {object} previousCondition\n * @fires QueryBuilder.afterUpdateGroupCondition\n * @private\n */\nQueryBuilder.prototype.updateGroupCondition = function(group, previousCondition) {\n    group.$el.find('>' + QueryBuilder.selectors.group_condition).each(function() {\n        var $this = $(this);\n        $this.prop('checked', $this.val() === group.condition);\n        $this.parent().toggleClass('active', $this.val() === group.condition);\n    });\n\n    /**\n     * After the group condition has been modified\n     * @event afterUpdateGroupCondition\n     * @memberof QueryBuilder\n     * @param {Group} group\n     * @param {object} previousCondition\n     */\n    this.trigger('afterUpdateGroupCondition', group, previousCondition);\n\n    this.trigger('rulesChanged');\n};\n\n/**\n * Updates the visibility of conditions based on number of rules inside each group\n * @private\n */\nQueryBuilder.prototype.refreshGroupsConditions = function() {\n    (function walk(group) {\n        if (!group.flags || (group.flags && !group.flags.condition_readonly)) {\n            group.$el.find('>' + QueryBuilder.selectors.group_condition).prop('disabled', group.rules.length <= 1)\n                .parent().toggleClass('disabled', group.rules.length <= 1);\n        }\n\n        group.each(null, function(group) {\n            walk(group);\n        }, this);\n    }(this.model.root));\n};\n\n/**\n * Adds a new rule\n * @param {Group} parent\n * @param {object} [data] - rule custom data\n * @param {object} [flags] - flags to apply to the rule\n * @returns {Rule}\n * @fires QueryBuilder.beforeAddRule\n * @fires QueryBuilder.afterAddRule\n * @fires QueryBuilder.changer:getDefaultFilter\n */\nQueryBuilder.prototype.addRule = function(parent, data, flags) {\n    /**\n     * Just before adding a rule, can be prevented\n     * @event beforeAddRule\n     * @memberof QueryBuilder\n     * @param {Group} parent\n     */\n    var e = this.trigger('beforeAddRule', parent);\n    if (e.isDefaultPrevented()) {\n        return null;\n    }\n\n    var rule_id = this.nextRuleId();\n    var $rule = $($.parseHTML(this.getRuleTemplate(rule_id)));\n    var model = parent.addRule($rule);\n\n    model.data = data;\n    model.flags = $.extend({}, this.settings.default_rule_flags, flags);\n\n    /**\n     * Just after adding a rule\n     * @event afterAddRule\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     */\n    this.trigger('afterAddRule', model);\n\n    model.$el.find(\"[data-bs-toggle=tooltip]\").each(function() {\n        new bootstrap.Tooltip(this, {\n            //*** container: this.$el[0], // Note: Do not put in this.$el[0] or the position of the tooltip will be affected after size change (e.g. after adding a rule)\n            trigger: \"hover\",\n            placement: \"bottom\"\n        });\n    });\n\n    this.trigger('rulesChanged');\n\n    this.createRuleFilters(model);\n\n    if (this.settings.default_filter || !this.settings.display_empty_filter) {\n        /**\n         * Modifies the default filter for a rule\n         * @event changer:getDefaultFilter\n         * @memberof QueryBuilder\n         * @param {QueryBuilder.Filter} filter\n         * @param {Rule} rule\n         * @returns {QueryBuilder.Filter}\n         */\n        model.filter = this.change('getDefaultFilter',\n            this.getFilterById(this.settings.default_filter || this.filters[0].id),\n            model\n        );\n    }\n\n    return model;\n};\n\n/**\n * Tries to delete a rule\n * @param {Rule} rule\n * @returns {boolean} if the rule has been deleted\n * @fires QueryBuilder.beforeDeleteRule\n * @fires QueryBuilder.afterDeleteRule\n */\nQueryBuilder.prototype.deleteRule = function(rule) {\n    if (rule.flags.no_delete) {\n        return false;\n    }\n\n    /**\n     * Just before deleting a rule, can be prevented\n     * @event beforeDeleteRule\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     */\n    var e = this.trigger('beforeDeleteRule', rule);\n    if (e.isDefaultPrevented()) {\n        return false;\n    }\n\n    rule.drop();\n\n    /**\n     * Just after deleting a rule\n     * @event afterDeleteRule\n     * @memberof QueryBuilder\n     */\n    this.trigger('afterDeleteRule');\n\n    this.trigger('rulesChanged');\n\n    return true;\n};\n\n/**\n * Creates the filters for a rule\n * @param {Rule} rule\n * @fires QueryBuilder.changer:getRuleFilters\n * @fires QueryBuilder.afterCreateRuleFilters\n * @private\n */\nQueryBuilder.prototype.createRuleFilters = function(rule) {\n    /**\n     * Modifies the list a filters available for a rule\n     * @event changer:getRuleFilters\n     * @memberof QueryBuilder\n     * @param {QueryBuilder.Filter[]} filters\n     * @param {Rule} rule\n     * @returns {QueryBuilder.Filter[]}\n     */\n    var filters = this.change('getRuleFilters', this.filters, rule);\n    var $filterSelect = $($.parseHTML(this.getRuleFilterSelect(rule, filters)));\n\n    rule.$el.find(QueryBuilder.selectors.filter_container).html($filterSelect);\n\n    /**\n     * After creating the dropdown for filters\n     * @event afterCreateRuleFilters\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     */\n    this.trigger('afterCreateRuleFilters', rule);\n\n    this.applyRuleFlags(rule);\n};\n\n/**\n * Creates the operators for a rule and init the rule operator\n * @param {Rule} rule\n * @fires QueryBuilder.afterCreateRuleOperators\n * @private\n */\nQueryBuilder.prototype.createRuleOperators = function(rule) {\n    var $operatorContainer = rule.$el.find(QueryBuilder.selectors.operator_container).empty();\n\n    if (!rule.filter) {\n        return;\n    }\n\n    var operators = this.getOperators(rule.filter);\n    var $operatorSelect = $($.parseHTML(this.getRuleOperatorSelect(rule, operators)));\n\n    $operatorContainer.html($operatorSelect);\n\n    // set the operator without triggering update event\n    if (rule.filter.default_operator) {\n        rule.__.operator = this.getOperatorByType(rule.filter.default_operator);\n    }\n    else {\n        rule.__.operator = operators[0];\n    }\n\n    rule.$el.find(QueryBuilder.selectors.rule_operator).val(rule.operator.type);\n\n    /**\n     * After creating the dropdown for operators\n     * @event afterCreateRuleOperators\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     * @param {QueryBuilder.Operator[]} operators - allowed operators for this rule\n     */\n    this.trigger('afterCreateRuleOperators', rule, operators);\n\n    this.applyRuleFlags(rule);\n};\n\n/**\n * Creates the main input for a rule\n * @param {Rule} rule\n * @fires QueryBuilder.afterCreateRuleInput\n * @private\n */\nQueryBuilder.prototype.createRuleInput = function(rule) {\n    var $valueContainer = rule.$el.find(QueryBuilder.selectors.value_container).empty();\n\n    rule.__.value = undefined;\n\n    if (!rule.filter || !rule.operator || rule.operator.nb_inputs === 0) {\n        return;\n    }\n\n    var self = this;\n    var $inputs = $();\n    var filter = rule.filter;\n\n    for (var i = 0; i < rule.operator.nb_inputs; i++) {\n        var $ruleInput = $($.parseHTML(this.getRuleInput(rule, i).trim(), document, true)); // Keep scripts //***\n        if (i > 0) $valueContainer.append(this.settings.inputs_separator);\n        $valueContainer.append($ruleInput);\n        $inputs = $inputs.add($ruleInput);\n    }\n\n    $valueContainer.css('display', '');\n\n    $inputs.on('change ' + (filter.input_event || ''), function() {\n        if (!rule._updating_input) {\n            rule._updating_value = true;\n            rule.value = self.getRuleInputValue(rule);\n            rule._updating_value = false;\n        }\n    });\n\n    if (filter.plugin) {\n        $inputs[filter.plugin](filter.plugin_config || {});\n    }\n\n    /**\n     * After creating the input for a rule and initializing optional plugin\n     * @event afterCreateRuleInput\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     */\n    this.trigger('afterCreateRuleInput', rule);\n\n    if (filter.default_value !== undefined) {\n        rule.value = filter.default_value;\n    }\n    else {\n        rule._updating_value = true;\n        rule.value = self.getRuleInputValue(rule);\n        rule._updating_value = false;\n    }\n\n    this.applyRuleFlags(rule);\n};\n\n/**\n * Performs action when a rule's filter changes\n * @param {Rule} rule\n * @param {object} previousFilter\n * @fires QueryBuilder.afterUpdateRuleFilter\n * @private\n */\nQueryBuilder.prototype.updateRuleFilter = function(rule, previousFilter) {\n    this.createRuleOperators(rule);\n    this.createRuleInput(rule);\n\n    rule.$el.find(QueryBuilder.selectors.rule_filter).val(rule.filter ? rule.filter.id : '-1');\n\n    // clear rule data if the filter changed\n    if (previousFilter && rule.filter && previousFilter.id !== rule.filter.id) {\n        rule.data = undefined;\n    }\n\n    /**\n     * After the filter has been updated and the operators and input re-created\n     * @event afterUpdateRuleFilter\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     * @param {object} previousFilter\n     */\n    this.trigger('afterUpdateRuleFilter', rule, previousFilter);\n\n    this.trigger('rulesChanged');\n};\n\n/**\n * Performs actions when a rule's operator changes\n * @param {Rule} rule\n * @param {object} previousOperator\n * @fires QueryBuilder.afterUpdateRuleOperator\n * @private\n */\nQueryBuilder.prototype.updateRuleOperator = function(rule, previousOperator) {\n    var $valueContainer = rule.$el.find(QueryBuilder.selectors.value_container);\n\n    if (!rule.operator || rule.operator.nb_inputs === 0) {\n        $valueContainer.hide();\n\n        rule.__.value = undefined;\n    }\n    else {\n        $valueContainer.css('display', '');\n\n        if ($valueContainer.is(':empty') || !previousOperator ||\n            rule.operator.nb_inputs !== previousOperator.nb_inputs ||\n            rule.operator.optgroup !== previousOperator.optgroup\n        ) {\n            this.createRuleInput(rule);\n        }\n    }\n\n    if (rule.operator) {\n        rule.$el.find(QueryBuilder.selectors.rule_operator).val(rule.operator.type);\n\n        // refresh value if the format changed for this operator\n        rule.__.value = this.getRuleInputValue(rule);\n    }\n\n    /**\n     *  After the operator has been updated and the input optionally re-created\n     * @event afterUpdateRuleOperator\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     * @param {object} previousOperator\n     */\n    this.trigger('afterUpdateRuleOperator', rule, previousOperator);\n\n    this.trigger('rulesChanged');\n};\n\n/**\n * Performs actions when rule's value changes\n * @param {Rule} rule\n * @param {object} previousValue\n * @fires QueryBuilder.afterUpdateRuleValue\n * @private\n */\nQueryBuilder.prototype.updateRuleValue = function(rule, previousValue) {\n    if (!rule._updating_value) {\n        this.setRuleInputValue(rule, rule.value);\n    }\n\n    /**\n     * After the rule value has been modified\n     * @event afterUpdateRuleValue\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     * @param {*} previousValue\n     */\n    this.trigger('afterUpdateRuleValue', rule, previousValue);\n\n    this.trigger('rulesChanged');\n};\n\n/**\n * Changes a rule's properties depending on its flags\n * @param {Rule} rule\n * @fires QueryBuilder.afterApplyRuleFlags\n * @private\n */\nQueryBuilder.prototype.applyRuleFlags = function(rule) {\n    var flags = rule.flags;\n    var Selectors = QueryBuilder.selectors;\n\n    rule.$el.find(Selectors.rule_filter).prop('disabled', flags.filter_readonly);\n    rule.$el.find(Selectors.rule_operator).prop('disabled', flags.operator_readonly);\n    rule.$el.find(Selectors.rule_value).prop('disabled', flags.value_readonly);\n\n    if (flags.no_delete) {\n        rule.$el.find(Selectors.delete_rule).remove();\n    }\n\n    /**\n     * After rule's flags has been applied\n     * @event afterApplyRuleFlags\n     * @memberof QueryBuilder\n     * @param {Rule} rule\n     */\n    this.trigger('afterApplyRuleFlags', rule);\n};\n\n/**\n * Changes group's properties depending on its flags\n * @param {Group} group\n * @fires QueryBuilder.afterApplyGroupFlags\n * @private\n */\nQueryBuilder.prototype.applyGroupFlags = function(group) {\n    var flags = group.flags;\n    var Selectors = QueryBuilder.selectors;\n\n    group.$el.find('>' + Selectors.group_condition).prop('disabled', flags.condition_readonly)\n        .parent().toggleClass('readonly', flags.condition_readonly);\n\n    if (flags.no_add_rule) {\n        group.$el.find(Selectors.add_rule).remove();\n    }\n    if (flags.no_add_group) {\n        group.$el.find(Selectors.add_group).remove();\n    }\n    if (flags.no_delete) {\n        group.$el.find(Selectors.delete_group).remove();\n    }\n\n    /**\n     * After group's flags has been applied\n     * @event afterApplyGroupFlags\n     * @memberof QueryBuilder\n     * @param {Group} group\n     */\n    this.trigger('afterApplyGroupFlags', group);\n};\n\n/**\n * Clears all errors markers\n * @param {Node} [node] default is root Group\n */\nQueryBuilder.prototype.clearErrors = function(node) {\n    node = node || this.model.root;\n\n    if (!node) {\n        return;\n    }\n\n    node.error = null;\n\n    if (node instanceof Group) {\n        node.each(function(rule) {\n            rule.error = null;\n        }, function(group) {\n            this.clearErrors(group);\n        }, this);\n    }\n};\n\n/**\n * Adds/Removes error on a Rule or Group\n * @param {Node} node\n * @fires QueryBuilder.changer:displayError\n * @private\n */\nQueryBuilder.prototype.updateError = function(node) {\n    if (this.settings.display_errors) {\n        if (node.error === null) {\n            node.$el.removeClass('has-error');\n        }\n        else {\n            var errorMessage = this.translate('errors', node.error[0]);\n            errorMessage = Utils.fmt(errorMessage, node.error.slice(1));\n\n            /**\n             * Modifies an error message before display\n             * @event changer:displayError\n             * @memberof QueryBuilder\n             * @param {string} errorMessage - the error message (translated and formatted)\n             * @param {array} error - the raw error array (error code and optional arguments)\n             * @param {Node} node\n             * @returns {string}\n             */\n            errorMessage = this.change('displayError', errorMessage, node.error, node);\n\n            if (errorMessage)\n                node.$el.addClass('has-error').find(QueryBuilder.selectors.error_container).eq(0).html(errorMessage); //***\n        }\n    }\n};\n\n/**\n * Triggers a validation error event\n * @param {Node} node\n * @param {string|array} error\n * @param {*} value\n * @fires QueryBuilder.validationError\n * @private\n */\nQueryBuilder.prototype.triggerValidationError = function(node, error, value) {\n    if (!Array.isArray(error)) {\n        error = [error];\n    }\n\n    /**\n     * Fired when a validation error occurred, can be prevented\n     * @event validationError\n     * @memberof QueryBuilder\n     * @param {Node} node\n     * @param {string} error\n     * @param {*} value\n     */\n    var e = this.trigger('validationError', node, error, value);\n    if (!e.isDefaultPrevented()) {\n        node.error = error;\n    }\n};\n\n\n/**\n * Destroys the builder\n * @fires QueryBuilder.beforeDestroy\n */\nQueryBuilder.prototype.destroy = function() {\n    /**\n     * Before the {@link QueryBuilder#destroy} method\n     * @event beforeDestroy\n     * @memberof QueryBuilder\n     */\n    this.trigger('beforeDestroy');\n\n    if (this.status.generated_id) {\n        this.$el.removeAttr('id');\n    }\n\n    this.clear();\n    this.model = null;\n\n    this.$el\n        .off('.queryBuilder')\n        .removeClass('query-builder')\n        .removeData('queryBuilder');\n\n    delete this.$el[0].queryBuilder;\n};\n\n/**\n * Clear all rules and resets the root group\n * @fires QueryBuilder.beforeReset\n * @fires QueryBuilder.afterReset\n */\nQueryBuilder.prototype.reset = function() {\n    /**\n     * Before the {@link QueryBuilder#reset} method, can be prevented\n     * @event beforeReset\n     * @memberof QueryBuilder\n     */\n    var e = this.trigger('beforeReset');\n    if (e.isDefaultPrevented()) {\n        return;\n    }\n\n    this.status.group_id = 1;\n    this.status.rule_id = 0;\n\n    this.model.root.empty();\n\n    this.model.root.data = undefined;\n    this.model.root.flags = $.extend({}, this.settings.default_group_flags);\n    this.model.root.condition = this.settings.default_condition;\n\n    this.addRule(this.model.root);\n\n    /**\n     * After the {@link QueryBuilder#reset} method\n     * @event afterReset\n     * @memberof QueryBuilder\n     */\n    this.trigger('afterReset');\n\n    this.trigger('rulesChanged');\n};\n\n/**\n * Clears all rules and removes the root group\n * @fires QueryBuilder.beforeClear\n * @fires QueryBuilder.afterClear\n */\nQueryBuilder.prototype.clear = function() {\n    /**\n     * Before the {@link QueryBuilder#clear} method, can be prevented\n     * @event beforeClear\n     * @memberof QueryBuilder\n     */\n    var e = this.trigger('beforeClear');\n    if (e.isDefaultPrevented()) {\n        return;\n    }\n\n    this.status.group_id = 0;\n    this.status.rule_id = 0;\n\n    if (this.model.root) {\n        this.model.root.drop();\n        this.model.root = null;\n    }\n\n    /**\n     * After the {@link QueryBuilder#clear} method\n     * @event afterClear\n     * @memberof QueryBuilder\n     */\n    this.trigger('afterClear');\n\n    this.trigger('rulesChanged');\n};\n\n/**\n * Modifies the builder configuration.<br>\n * Only options defined in QueryBuilder.modifiable_options are modifiable\n * @param {object} options\n */\nQueryBuilder.prototype.setOptions = function(options) {\n    $.each(options, function(opt, value) {\n        if (QueryBuilder.modifiable_options.indexOf(opt) !== -1) {\n            this.settings[opt] = value;\n        }\n    }.bind(this));\n};\n\n/**\n * Returns the model associated to a DOM object, or the root model\n * @param {jQuery} [target]\n * @returns {Node}\n */\nQueryBuilder.prototype.getModel = function(target) {\n    if (!target) {\n        return this.model.root;\n    }\n    else if (target instanceof Node) {\n        return target;\n    }\n    else {\n        return $(target).data('queryBuilderModel');\n    }\n};\n\n/**\n * Validates the whole builder\n * @param {object} [options]\n * @param {boolean} [options.skip_empty=false] - skips validating rules that have no filter selected\n * @returns {boolean}\n * @fires QueryBuilder.changer:validate\n */\nQueryBuilder.prototype.validate = function(options) {\n    options = $.extend({\n        skip_empty: false\n    }, options);\n\n    this.clearErrors();\n\n    var self = this;\n\n    var valid = (function parse(group) {\n        var done = 0;\n        var errors = 0;\n\n        group.each(function(rule) {\n            if (!rule.filter && options.skip_empty) {\n                return;\n            }\n\n            if (!rule.filter) {\n                self.triggerValidationError(rule, 'no_filter', null);\n                errors++;\n                return;\n            }\n\n            if (!rule.operator) {\n                self.triggerValidationError(rule, 'no_operator', null);\n                errors++;\n                return;\n            }\n\n            if (rule.operator.nb_inputs !== 0) {\n                var valid = self.validateValue(rule, rule.value);\n\n                if (valid !== true) {\n                    self.triggerValidationError(rule, valid, rule.value);\n                    errors++;\n                    return;\n                }\n            }\n\n            done++;\n\n        }, function(group) {\n            var res = parse(group);\n            if (res === true) {\n                done++;\n            }\n            else if (res === false) {\n                errors++;\n            }\n        });\n\n        if (errors > 0) {\n            return false;\n        }\n        else if (done === 0 && !group.isRoot() && options.skip_empty) {\n            return null;\n        }\n        else if (done === 0 && (!self.settings.allow_empty || !group.isRoot())) {\n            self.triggerValidationError(group, 'empty_group', null);\n            return false;\n        }\n\n        return true;\n\n    }(this.model.root));\n\n    /**\n     * Modifies the result of the {@link QueryBuilder#validate} method\n     * @event changer:validate\n     * @memberof QueryBuilder\n     * @param {boolean} valid\n     * @returns {boolean}\n     */\n    return this.change('validate', valid);\n};\n\n/**\n * Gets an object representing current rules\n * @param {object} [options]\n * @param {boolean|string} [options.get_flags=false] - export flags, true: only changes from default flags or 'all'\n * @param {boolean} [options.allow_invalid=false] - returns rules even if they are invalid\n * @param {boolean} [options.skip_empty=false] - remove rules that have no filter selected\n * @returns {object}\n * @fires QueryBuilder.changer:ruleToJson\n * @fires QueryBuilder.changer:groupToJson\n * @fires QueryBuilder.changer:getRules\n */\nQueryBuilder.prototype.getRules = function(options) {\n    options = $.extend({\n        get_flags: false,\n        allow_invalid: false,\n        skip_empty: false\n    }, options);\n\n    var valid = this.validate(options);\n    if (!valid && !options.allow_invalid) {\n        return null;\n    }\n\n    var self = this;\n\n    var out = (function parse(group) {\n        var groupData = {\n            condition: group.condition,\n            rules: []\n        };\n\n        if (group.data) {\n            groupData.data = $.extendext(true, 'replace', {}, group.data);\n        }\n\n        if (options.get_flags) {\n            var flags = self.getGroupFlags(group.flags, options.get_flags === 'all');\n            if (!$.isEmptyObject(flags)) {\n                groupData.flags = flags;\n            }\n        }\n\n        group.each(function(rule) {\n            if ((!rule.filter || rule.value === undefined) && options.skip_empty) { //***\n                return;\n            }\n\n            var value = null;\n            if (!rule.operator || rule.operator.nb_inputs !== 0) {\n                value = rule.value;\n            }\n\n            var ruleData = {\n                id: rule.filter ? rule.filter.id : null,\n                field: rule.filter ? rule.filter.field : null,\n                type: rule.filter ? rule.filter.type : null,\n                input: rule.filter ? rule.filter.input : null,\n                operator: rule.operator ? rule.operator.type : null,\n                value: value\n            };\n\n            if (rule.filter && rule.filter.data || rule.data) {\n                ruleData.data = $.extendext(true, 'replace', {}, rule.filter ? rule.filter.data : {}, rule.data);\n            }\n\n            if (options.get_flags) {\n                var flags = self.getRuleFlags(rule.flags, options.get_flags === 'all');\n                if (!$.isEmptyObject(flags)) {\n                    ruleData.flags = flags;\n                }\n            }\n\n            /**\n             * Modifies the JSON generated from a Rule object\n             * @event changer:ruleToJson\n             * @memberof QueryBuilder\n             * @param {object} json\n             * @param {Rule} rule\n             * @returns {object}\n             */\n            groupData.rules.push(self.change('ruleToJson', ruleData, rule));\n\n        }, function(model) {\n            var data = parse(model);\n            if (data.rules.length !== 0 || !options.skip_empty) {\n                groupData.rules.push(data);\n            }\n        }, this);\n\n        /**\n         * Modifies the JSON generated from a Group object\n         * @event changer:groupToJson\n         * @memberof QueryBuilder\n         * @param {object} json\n         * @param {Group} group\n         * @returns {object}\n         */\n        return self.change('groupToJson', groupData, group);\n\n    }(this.model.root));\n\n    out.valid = valid;\n\n    /**\n     * Modifies the result of the {@link QueryBuilder#getRules} method\n     * @event changer:getRules\n     * @memberof QueryBuilder\n     * @param {object} json\n     * @returns {object}\n     */\n    return this.change('getRules', out);\n};\n\n/**\n * Sets rules from object\n * @param {object} data\n * @param {object} [options]\n * @param {boolean} [options.allow_invalid=false] - silent-fail if the data are invalid\n * @throws RulesError, UndefinedConditionError\n * @fires QueryBuilder.changer:setRules\n * @fires QueryBuilder.changer:jsonToRule\n * @fires QueryBuilder.changer:jsonToGroup\n * @fires QueryBuilder.afterSetRules\n */\nQueryBuilder.prototype.setRules = function(data, options) {\n    options = $.extend({\n        allow_invalid: false\n    }, options);\n\n    if (Array.isArray(data)) {\n        data = {\n            condition: this.settings.default_condition,\n            rules: data\n        };\n    }\n\n    if (!data || !data.rules || (data.rules.length === 0 && !this.settings.allow_empty)) {\n        Utils.error('RulesParse', 'Incorrect data object passed');\n    }\n\n    this.clear();\n    this.setRoot(false, data.data, this.parseGroupFlags(data));\n\n    /**\n     * Modifies data before the {@link QueryBuilder#setRules} method\n     * @event changer:setRules\n     * @memberof QueryBuilder\n     * @param {object} json\n     * @param {object} options\n     * @returns {object}\n     */\n    data = this.change('setRules', data, options);\n\n    var self = this;\n\n    (function add(data, group) {\n        if (group === null) {\n            return;\n        }\n\n        if (data.condition === undefined) {\n            data.condition = self.settings.default_condition;\n        }\n        else if (self.settings.conditions.indexOf(data.condition) == -1) {\n            Utils.error(!options.allow_invalid, 'UndefinedCondition', 'Invalid condition \"{0}\"', data.condition);\n            data.condition = self.settings.default_condition;\n        }\n\n        group.condition = data.condition;\n\n        data.rules.forEach(function(item) {\n            var model;\n\n            if (item.rules !== undefined) {\n                if (self.settings.allow_groups !== -1 && self.settings.allow_groups < group.level) {\n                    Utils.error(!options.allow_invalid, 'RulesParse', 'No more than {0} groups are allowed', self.settings.allow_groups);\n                    self.reset();\n                }\n                else {\n                    model = self.addGroup(group, false, item.data, self.parseGroupFlags(item));\n                    if (model === null) {\n                        return;\n                    }\n\n                    add(item, model);\n                }\n            }\n            else {\n                if (!item.empty) {\n                    if (item.id === undefined) {\n                        Utils.error(!options.allow_invalid, 'RulesParse', 'Missing rule field id');\n                        item.empty = true;\n                    }\n                    if (item.operator === undefined) {\n                        item.operator = 'equal';\n                    }\n                }\n\n                model = self.addRule(group, item.data, self.parseRuleFlags(item));\n                if (model === null) {\n                    return;\n                }\n\n                if (!item.empty) {\n                    model.filter = self.getFilterById(item.id, !options.allow_invalid);\n                }\n\n                if (model.filter) {\n                    model.operator = self.getOperatorByType(item.operator, !options.allow_invalid);\n\n                    if (!model.operator) {\n                        model.operator = self.getOperators(model.filter)[0];\n                    }\n                }\n\n                if (model.operator && model.operator.nb_inputs !== 0) {\n                    if (item.value !== undefined) {\n                        model.value = item.value;\n                    }\n                    else if (model.filter.default_value !== undefined) {\n                        model.value = model.filter.default_value;\n                    }\n                }\n\n                /**\n                 * Modifies the Rule object generated from the JSON\n                 * @event changer:jsonToRule\n                 * @memberof QueryBuilder\n                 * @param {Rule} rule\n                 * @param {object} json\n                 * @returns {Rule} the same rule\n                 */\n                if (self.change('jsonToRule', model, item) != model) {\n                    Utils.error('RulesParse', 'Plugin tried to change rule reference');\n                }\n            }\n        });\n\n        /**\n         * Modifies the Group object generated from the JSON\n         * @event changer:jsonToGroup\n         * @memberof QueryBuilder\n         * @param {Group} group\n         * @param {object} json\n         * @returns {Group} the same group\n         */\n        if (self.change('jsonToGroup', group, data) != group) {\n            Utils.error('RulesParse', 'Plugin tried to change group reference');\n        }\n\n    }(data, this.model.root));\n\n    /**\n     * After the {@link QueryBuilder#setRules} method\n     * @event afterSetRules\n     * @memberof QueryBuilder\n     */\n    this.trigger('afterSetRules');\n};\n\n\n/**\n * Performs value validation\n * @param {Rule} rule\n * @param {string|string[]} value\n * @returns {array|boolean} true or error array\n * @fires QueryBuilder.changer:validateValue\n */\nQueryBuilder.prototype.validateValue = function(rule, value) {\n    var validation = rule.filter.validation || {};\n    var result = true;\n\n    if (validation.callback) {\n        result = validation.callback.call(this, value, rule);\n    }\n    else {\n        result = this._validateValue(rule, value);\n    }\n\n    /**\n     * Modifies the result of the rule validation method\n     * @event changer:validateValue\n     * @memberof QueryBuilder\n     * @param {array|boolean} result - true or an error array\n     * @param {*} value\n     * @param {Rule} rule\n     * @returns {array|boolean}\n     */\n    return this.change('validateValue', result, value, rule);\n};\n\n/**\n * Default validation function\n * @param {Rule} rule\n * @param {string|string[]} value\n * @returns {array|boolean} true or error array\n * @throws ConfigError\n * @private\n */\nQueryBuilder.prototype._validateValue = function(rule, value) {\n    var filter = rule.filter;\n    var operator = rule.operator;\n    var validation = filter.validation || {};\n    var result = true;\n    var tmp, tempValue;\n\n    if (rule.operator.nb_inputs === 1) {\n        value = [value];\n    }\n\n    for (var i = 0; i < operator.nb_inputs; i++) {\n        if (!operator.multiple && Array.isArray(value[i]) && value[i].length > 1) {\n            result = ['operator_not_multiple', operator.type, this.translate('operators', operator.type)];\n            break;\n        }\n\n        switch (filter.input) {\n            case 'radio':\n                if (value[i] === undefined || value[i].length === 0) {\n                    if (!validation.allow_empty_value) {\n                        result = ['radio_empty'];\n                    }\n                    break;\n                }\n                break;\n\n            case 'checkbox':\n                if (value[i] === undefined || value[i].length === 0) {\n                    if (!validation.allow_empty_value) {\n                        result = ['checkbox_empty'];\n                    }\n                    break;\n                }\n                break;\n\n            case 'select':\n                if (value[i] === undefined || value[i].length === 0 || (filter.placeholder && value[i] == filter.placeholder_value)) {\n                    if (!validation.allow_empty_value) {\n                        result = ['select_empty'];\n                    }\n                    break;\n                }\n                break;\n\n            default:\n                tempValue = Array.isArray(value[i]) ? value[i] : [value[i]];\n\n                for (var j = 0; j < tempValue.length; j++) {\n                    switch (QueryBuilder.types[filter.type]) {\n                        case 'string':\n                            if (tempValue[j] === undefined || tempValue[j].length === 0) {\n                                if (!validation.allow_empty_value) {\n                                    result = ['string_empty'];\n                                }\n                                break;\n                            }\n                            if (validation.min !== undefined) {\n                                if (tempValue[j].length < parseInt(validation.min)) {\n                                    result = [this.getValidationMessage(validation, 'min', 'string_exceed_min_length'), validation.min];\n                                    break;\n                                }\n                            }\n                            if (validation.max !== undefined) {\n                                if (tempValue[j].length > parseInt(validation.max)) {\n                                    result = [this.getValidationMessage(validation, 'max', 'string_exceed_max_length'), validation.max];\n                                    break;\n                                }\n                            }\n                            if (validation.format) {\n                                if (typeof validation.format == 'string') {\n                                    validation.format = new RegExp(validation.format);\n                                }\n                                if (!validation.format.test(tempValue[j])) {\n                                    result = [this.getValidationMessage(validation, 'format', 'string_invalid_format'), validation.format];\n                                    break;\n                                }\n                            }\n                            break;\n\n                        case 'number':\n                            if (tempValue[j] === undefined || tempValue[j].length === 0) {\n                                if (!validation.allow_empty_value) {\n                                    result = ['number_nan'];\n                                }\n                                break;\n                            }\n                            if (isNaN(tempValue[j])) {\n                                result = ['number_nan'];\n                                break;\n                            }\n                            if (filter.type == 'integer') {\n                                if (parseInt(tempValue[j]) != tempValue[j]) {\n                                    result = ['number_not_integer'];\n                                    break;\n                                }\n                            }\n                            else {\n                                if (parseFloat(tempValue[j]) != tempValue[j]) {\n                                    result = ['number_not_double'];\n                                    break;\n                                }\n                            }\n                            if (validation.min !== undefined) {\n                                if (tempValue[j] < parseFloat(validation.min)) {\n                                    result = [this.getValidationMessage(validation, 'min', 'number_exceed_min'), validation.min];\n                                    break;\n                                }\n                            }\n                            if (validation.max !== undefined) {\n                                if (tempValue[j] > parseFloat(validation.max)) {\n                                    result = [this.getValidationMessage(validation, 'max', 'number_exceed_max'), validation.max];\n                                    break;\n                                }\n                            }\n                            if (validation.step !== undefined && validation.step !== 'any') {\n                                var v = (tempValue[j] / validation.step).toPrecision(14);\n                                if (parseInt(v) != v) {\n                                    result = [this.getValidationMessage(validation, 'step', 'number_wrong_step'), validation.step];\n                                    break;\n                                }\n                            }\n                            break;\n\n                        case 'datetime':\n                            if (tempValue[j] === undefined || tempValue[j].length === 0) {\n                                if (!validation.allow_empty_value) {\n                                    result = ['datetime_empty'];\n                                }\n                                break;\n                            }\n\n                            // we need Luxon //***\n                            if (validation.format) {\n                                if (!('luxon' in window)) {\n                                    Utils.error('MissingLibrary', 'Luxon is required for Date/Time validation.'); //***\n                                }\n\n                                var datetime = DateTime.fromFormat(tempValue[j], validation.format, validation.options); //***\n                                if (!datetime.isValid()) {\n                                    result = [this.getValidationMessage(validation, 'format', 'datetime_invalid'), validation.format];\n                                    break;\n                                }\n                                else {\n                                    if (validation.min) {\n                                        if (datetime < DateTime.fromFormat(validation.min, validation.format, validation.options)) { //***\n                                            result = [this.getValidationMessage(validation, 'min', 'datetime_exceed_min'), validation.min];\n                                            break;\n                                        }\n                                    }\n                                    if (validation.max) {\n                                        if (datetime > DateTime.fromFormat(validation.max, validation.format, validation.options)) { //***\n                                            result = [this.getValidationMessage(validation, 'max', 'datetime_exceed_max'), validation.max];\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                            break;\n\n                        case 'boolean':\n                            if (tempValue[j] === undefined || tempValue[j].length === 0) {\n                                if (!validation.allow_empty_value) {\n                                    result = ['boolean_not_valid'];\n                                }\n                                break;\n                            }\n                            tmp = ('' + tempValue[j]).trim().toLowerCase();\n                            if (tmp !== 'true' && tmp !== 'false' &&\n                                tmp !== 't' && tmp !== 'f' && tmp !== 'y' && tmp !== 'n' && //***\n                                tmp !== '1' && tmp !== '0' && tempValue[j] !== 1 && tempValue[j] !== 0) {\n                                result = ['boolean_not_valid'];\n                                break;\n                            }\n                    }\n\n                    if (result !== true) {\n                        break;\n                    }\n                }\n        }\n\n        if (result !== true) {\n            break;\n        }\n    }\n\n    if ((rule.operator.type === 'between' || rule.operator.type === 'not_between') && value.length === 2) {\n        switch (QueryBuilder.types[filter.type]) {\n            case 'number':\n                if (value[0] > value[1]) {\n                    result = ['number_between_invalid', value[0], value[1]];\n                }\n                break;\n\n            case 'datetime':\n                // we need Luxon //***\n                if (validation.format) {\n                    if (!('luxon' in window)) {\n                        Utils.error('MissingLibrary', 'Luxon is required for Date/Time validation.'); //***\n                    }\n\n                    if (DateTime.fromFormat(value[0], validation.format, validation.options) > DateTime.fromFormat(value[1], validation.format, validation.options)) { //***\n                        result = ['datetime_between_invalid', value[0], value[1]];\n                    }\n                }\n                break;\n        }\n    }\n\n    return result;\n};\n\n/**\n * Returns an incremented group ID\n * @returns {string}\n * @private\n */\nQueryBuilder.prototype.nextGroupId = function() {\n    return this.status.id + '_group_' + (this.status.group_id++);\n};\n\n/**\n * Returns an incremented rule ID\n * @returns {string}\n * @private\n */\nQueryBuilder.prototype.nextRuleId = function() {\n    return this.status.id + '_rule_' + (this.status.rule_id++);\n};\n\n/**\n * Returns the operators for a filter\n * @param {string|object} filter - filter id or filter object\n * @returns {object[]}\n * @fires QueryBuilder.changer:getOperators\n */\nQueryBuilder.prototype.getOperators = function(filter) {\n    if (typeof filter == 'string') {\n        filter = this.getFilterById(filter);\n    }\n\n    var result = [];\n\n    for (var i = 0, l = this.operators.length; i < l; i++) {\n        // filter operators check\n        if (filter.operators) {\n            if (filter.operators.indexOf(this.operators[i].type) == -1) {\n                continue;\n            }\n        }\n        // type check\n        else if (this.operators[i].apply_to.indexOf(QueryBuilder.types[filter.type]) == -1) {\n            continue;\n        }\n\n        result.push(this.operators[i]);\n    }\n\n    // keep sort order defined for the filter\n    if (filter.operators) {\n        result.sort(function(a, b) {\n            return filter.operators.indexOf(a.type) - filter.operators.indexOf(b.type);\n        });\n    }\n\n    /**\n     * Modifies the operators available for a filter\n     * @event changer:getOperators\n     * @memberof QueryBuilder\n     * @param {QueryBuilder.Operator[]} operators\n     * @param {QueryBuilder.Filter} filter\n     * @returns {QueryBuilder.Operator[]}\n     */\n    return this.change('getOperators', result, filter);\n};\n\n/**\n * Returns a particular filter by its id\n * @param {string} id\n * @param {boolean} [doThrow=true]\n * @returns {object|null}\n * @throws UndefinedFilterError\n */\nQueryBuilder.prototype.getFilterById = function(id, doThrow) {\n    if (id == '-1') {\n        return null;\n    }\n\n    for (var i = 0, l = this.filters.length; i < l; i++) {\n        if (this.filters[i].id == id) {\n            return this.filters[i];\n        }\n    }\n\n    Utils.error(doThrow !== false, 'UndefinedFilter', 'Undefined filter \"{0}\"', id);\n\n    return null;\n};\n\n/**\n * Returns a particular operator by its type\n * @param {string} type\n * @param {boolean} [doThrow=true]\n * @returns {object|null}\n * @throws UndefinedOperatorError\n */\nQueryBuilder.prototype.getOperatorByType = function(type, doThrow) {\n    if (type == '-1') {\n        return null;\n    }\n\n    for (var i = 0, l = this.operators.length; i < l; i++) {\n        if (this.operators[i].type == type) {\n            return this.operators[i];\n        }\n    }\n\n    Utils.error(doThrow !== false, 'UndefinedOperator', 'Undefined operator \"{0}\"', type);\n\n    return null;\n};\n\n/**\n * Returns rule's current input value\n * @param {Rule} rule\n * @returns {*}\n * @fires QueryBuilder.changer:getRuleValue\n * @private\n */\nQueryBuilder.prototype.getRuleInputValue = function(rule) {\n    var filter = rule.filter;\n    var operator = rule.operator;\n    var value = [];\n\n    if (filter.valueGetter) {\n        value = filter.valueGetter.call(this, rule);\n    }\n    else {\n        var $value = rule.$el.find(QueryBuilder.selectors.value_container);\n\n        for (var i = 0; i < operator.nb_inputs; i++) {\n            var name = Utils.escapeElementId(rule.id + '_value_' + i);\n            var tmp;\n\n            switch (filter.input) {\n                case 'radio':\n                    value.push($value.find('[name=' + name + ']:checked').val());\n                    break;\n\n                case 'checkbox':\n                    tmp = [];\n                    $value.find('[name=' + name + ']:checked').each(function() {\n                        tmp.push($(this).val());\n                    });\n                    value.push(tmp);\n                    break;\n\n                case 'select':\n                    if (filter.multiple) {\n                        tmp = [];\n                        $value.find('[name=' + name + '] option:selected').each(function() {\n                            tmp.push($(this).val());\n                        });\n                        value.push(tmp);\n                    }\n                    else {\n                        value.push($value.find('[name=' + name + '] option:selected').val());\n                    }\n                    break;\n\n                default:\n                    value.push($value.find('[name=' + name + ']').val());\n            }\n        }\n\n        value = value.map(function(val) {\n            if (operator.multiple && filter.value_separator && typeof val == 'string') {\n                val = val.split(filter.value_separator);\n            }\n\n            if (Array.isArray(val)) {\n                return val.map(function(subval) {\n                    return Utils.changeType(subval, filter); //***\n                });\n            }\n            else {\n                return Utils.changeType(val, filter); //***\n            }\n        });\n\n        if (operator.nb_inputs === 1) {\n            value = value[0];\n        }\n\n        // @deprecated\n        // if (filter.valueParser) {\n        //     value = filter.valueParser.call(this, rule, value);\n        // }\n    }\n\n    /**\n     * Modifies the rule's value grabbed from the DOM\n     * @event changer:getRuleValue\n     * @memberof QueryBuilder\n     * @param {*} value\n     * @param {Rule} rule\n     * @returns {*}\n     */\n    return this.change('getRuleValue', value, rule);\n};\n\n/**\n * Sets the value of a rule's input\n * @param {Rule} rule\n * @param {*} value\n * @private\n */\nQueryBuilder.prototype.setRuleInputValue = function(rule, value) {\n    var filter = rule.filter;\n    var operator = rule.operator;\n\n    if (!filter || !operator) {\n        return;\n    }\n\n    rule._updating_input = true;\n\n    if (filter.valueSetter) {\n        filter.valueSetter.call(this, rule, value);\n    }\n    else {\n        var $value = rule.$el.find(QueryBuilder.selectors.value_container);\n\n        if (operator.nb_inputs == 1) {\n            value = [value];\n        }\n\n        for (var i = 0; i < operator.nb_inputs; i++) {\n            var name = Utils.escapeElementId(rule.id + '_value_' + i);\n\n            switch (filter.input) {\n                case 'radio':\n                    $value.find('[name=' + name + '][value=\"' + value[i] + '\"]').prop('checked', true).trigger('change');\n                    break;\n\n                case 'checkbox':\n                    if (!Array.isArray(value[i])) {\n                        value[i] = [value[i]];\n                    }\n                    value[i].forEach(function(value) {\n                        $value.find('[name=' + name + '][value=\"' + value + '\"]').prop('checked', true).trigger('change');\n                    });\n                    break;\n\n                default:\n                    if (operator.multiple && filter.value_separator && Array.isArray(value[i])) {\n                        value[i] = value[i].join(filter.value_separator);\n                    }\n                    $value.find('[name=' + name + ']').val(value[i]).trigger('change');\n                    break;\n            }\n        }\n    }\n\n    rule._updating_input = false;\n};\n\n/**\n * Parses rule flags\n * @param {object} rule\n * @returns {object}\n * @fires QueryBuilder.changer:parseRuleFlags\n * @private\n */\nQueryBuilder.prototype.parseRuleFlags = function(rule) {\n    var flags = $.extend({}, this.settings.default_rule_flags);\n\n    if (rule.readonly) {\n        $.extend(flags, {\n            filter_readonly: true,\n            operator_readonly: true,\n            value_readonly: true,\n            no_delete: true\n        });\n    }\n\n    if (rule.flags) {\n        $.extend(flags, rule.flags);\n    }\n\n    /**\n     * Modifies the consolidated rule's flags\n     * @event changer:parseRuleFlags\n     * @memberof QueryBuilder\n     * @param {object} flags\n     * @param {object} rule - <b>not</b> a Rule object\n     * @returns {object}\n     */\n    return this.change('parseRuleFlags', flags, rule);\n};\n\n/**\n * Gets a copy of flags of a rule\n * @param {object} flags\n * @param {boolean} [all=false] - return all flags or only changes from default flags\n * @returns {object}\n * @private\n */\nQueryBuilder.prototype.getRuleFlags = function(flags, all) {\n    if (all) {\n        return $.extend({}, flags);\n    }\n    else {\n        var ret = {};\n        $.each(this.settings.default_rule_flags, function(key, value) {\n            if (flags[key] !== value) {\n                ret[key] = flags[key];\n            }\n        });\n        return ret;\n    }\n};\n\n/**\n * Parses group flags\n * @param {object} group\n * @returns {object}\n * @fires QueryBuilder.changer:parseGroupFlags\n * @private\n */\nQueryBuilder.prototype.parseGroupFlags = function(group) {\n    var flags = $.extend({}, this.settings.default_group_flags);\n\n    if (group.readonly) {\n        $.extend(flags, {\n            condition_readonly: true,\n            no_add_rule: true,\n            no_add_group: true,\n            no_delete: true\n        });\n    }\n\n    if (group.flags) {\n        $.extend(flags, group.flags);\n    }\n\n    /**\n     * Modifies the consolidated group's flags\n     * @event changer:parseGroupFlags\n     * @memberof QueryBuilder\n     * @param {object} flags\n     * @param {object} group - <b>not</b> a Group object\n     * @returns {object}\n     */\n    return this.change('parseGroupFlags', flags, group);\n};\n\n/**\n * Gets a copy of flags of a group\n * @param {object} flags\n * @param {boolean} [all=false] - return all flags or only changes from default flags\n * @returns {object}\n * @private\n */\nQueryBuilder.prototype.getGroupFlags = function(flags, all) {\n    if (all) {\n        return $.extend({}, flags);\n    }\n    else {\n        var ret = {};\n        $.each(this.settings.default_group_flags, function(key, value) {\n            if (flags[key] !== value) {\n                ret[key] = flags[key];\n            }\n        });\n        return ret;\n    }\n};\n\n/**\n * Translate a label either by looking in the `lang` object or in itself if it's an object where keys are language codes\n * @param {string} [category]\n * @param {string|object} key\n * @returns {string}\n * @fires QueryBuilder.changer:translate\n */\nQueryBuilder.prototype.translate = function(category, key) {\n    if (key === undefined) { //***\n        key = category;\n        category = undefined;\n    }\n\n    var translation;\n    if (typeof key === 'object') {\n        translation = key[this.settings.lang_code] || key['en'];\n    }\n    else {\n        translation = (category ? this.lang[category] : this.lang)[key] || key;\n    }\n\n    /**\n     * Modifies the translated label\n     * @event changer:translate\n     * @memberof QueryBuilder\n     * @param {string} translation\n     * @param {string|object} key\n     * @param {string} [category]\n     * @returns {string}\n     */\n    return this.change('translate', translation, key, category);\n};\n\n/**\n * Returns a validation message\n * @param {object} validation\n * @param {string} type\n * @param {string} def\n * @returns {string}\n * @private\n */\nQueryBuilder.prototype.getValidationMessage = function(validation, type, def) {\n    return validation.messages && validation.messages[type] || def;\n};\n\n\nQueryBuilder.templates.group = ({ group_id, level, conditions, icons, settings, translate, builder }) => {\n  return `\n<div id=\"${group_id}\" class=\"rules-group-container\">\n  <div class=\"rules-group-header\">\n    ${level > 1 ? `\n    <button type=\"button\" class=\"btn-close float-end m-2\" aria-label=\"${translate(\"delete_group\")}\" data-delete=\"group\"></button>\n    ` : ''}\n    <div class=\"btn-group btn-group-sm float-end group-actions\"> \\\n      <button type=\"button\" class=\"btn btn-primary\" data-add=\"rule\" data-bs-toggle=\"tooltip\" title=\"${translate(\"add_rule\")}\">\n        <i class=\"${icons.add_rule}\"></i>\n      </button>\n      ${settings.allow_groups === -1 || settings.allow_groups >= level ? `\n      <button type=\"button\" class=\"btn btn-primary\" data-add=\"group\" data-bs-toggle=\"tooltip\" title=\"${translate(\"add_group\")}\">\n        <i class=\"${icons.add_group}\"></i>\n      </button>\n      ` : ''}\n    </div>\n    <div class=\"btn-group btn-group-sm group-conditions bg-white\" role=\"group\">\n      ${conditions.map((condition, i) => `\n        <input type=\"radio\" class=\"btn-check\" name=\"${group_id}_cond\" id=\"${group_id}_cond_${i + 1}\" value=\"${condition}\"> \\\n        <label class=\"btn btn-outline-primary\" for=\"${group_id}_cond_${i + 1}\">${translate(\"conditions\", condition)}</label>\n      `).join('\\n')}\n    </div>\n    ${settings.display_errors ? `\n      <div class=\"error-container\"></div>\n    ` : ''}\n  </div>\n  <div class=rules-group-body>\n    <div class=rules-list></div>\n  </div>\n</div>`;\n};\n\nQueryBuilder.templates.rule = ({ rule_id, icons, settings, translate, builder }) => {\n  return `\n<div id=\"${rule_id}\" class=\"rule-container\">\n  <div class=\"rule-header mb-1\">\n    <div class=\"btn-group btn-group-sm float-end rule-actions\">\n      <button type=\"button\" class=\"btn-close m-2\" aria-label=\"${translate(\"delete_rule\")}\" data-delete=\"rule\"></button>\n    </div>\n  </div>\n  <div class=\"rule-filter-container\"></div>\n  <div class=\"rule-operator-container\"></div>\n  <div class=\"rule-value-container\"></div>\n</div>`;\n};\n\nQueryBuilder.templates.filterSelect = ({ rule, filters, icons, settings, translate, builder }) => {\n  let optgroup = null;\n  return `\n<select class=\"form-select\" name=\"${rule.id}_filter\">\n  ${settings.display_empty_filter ? `\n    <option value=\"-1\">${settings.select_placeholder}</option>\n  ` : ''}\n  ${filters.map(filter => `\n    ${optgroup !== filter.optgroup ? `\n      ${optgroup !== null ? `</optgroup>` : ''}\n      ${(optgroup = filter.optgroup) !== null ? `\n        <optgroup label=\"${translate(settings.optgroups[optgroup])}\">\n      ` : ''}\n    ` : ''}\n    <option value=\"${filter.id}\" ${filter.icon ? `data-icon=\"${filter.icon}\"` : ''}>${translate(filter.label)}</option>\n  `).join('')}\n  ${optgroup !== null ? '</optgroup>' : ''}\n</select>`;\n};\n\nQueryBuilder.templates.operatorSelect = ({ rule, operators, icons, settings, translate, builder }) => {\n  let optgroup = null;\n  return `\n${operators.length === 1 ? `\n<span class=\"rule-operator\">\n${translate(\"operators\", operators[0].type)}\n</span>\n` : ''}\n${operators.length > 1 ? `\n<select class=\"form-select ${operators.length === 1 ? 'hide' : ''}\" name=\"${rule.id}_operator\">\n  ${operators.map(operator => `\n    ${optgroup !== operator.optgroup ? `\n      ${optgroup !== null ? `</optgroup>` : ''}\n      ${(optgroup = operator.optgroup) !== null ? `\n        <optgroup label=\"${translate(settings.optgroups[optgroup])}\">\n      ` : ''}\n    ` : ''}\n    <option value=\"${operator.type}\" ${operator.icon ? `data-icon=\"${operator.icon}\"` : ''}>${translate(\"operators\", operator.type)}</option>\n  `).join('')}\n  ${optgroup !== null ? '</optgroup>' : ''}\n</select>\n` : ''}`;\n};\n\nQueryBuilder.templates.ruleValueSelect = ({ name, rule, icons, settings, translate, builder }) => {\n  let optgroup = null;\n  return `\n<select class=\"form-select\" name=\"${name}\" ${rule.filter.multiple ? 'multiple' : ''}>\n  ${rule.filter.placeholder ? `\n    <option value=\"${rule.filter.placeholder_value}\" disabled selected>${rule.filter.placeholder}</option>\n  ` : ''}\n  ${rule.filter.values.map(entry => `\n    ${optgroup !== entry.optgroup ? `\n      ${optgroup !== null ? `</optgroup>` : ''}\n      ${(optgroup = entry.optgroup) !== null ? `\n        <optgroup label=\"${translate(settings.optgroups[optgroup])}\">\n      ` : ''}\n    ` : ''}\n    <option value=\"${entry.value}\">${entry.label}</option>\n  `).join('')}\n  ${optgroup !== null ? '</optgroup>' : ''}\n</select>`;\n};\n\nQueryBuilder.templates.ruleValueCheck = ({ name, rule, icons, settings, translate, builder }) => rule.filter.values.map((entry, i) => `\n<div class=\"form-check${rule.filter.vertical ? '' : ' form-check-inline'}\">\n    <input class=\"form-check-input\" type=\"${rule.filter.type}\" name=\"${name}\" id=\"${name + '_' + i}\" value=\"${entry.value}\">\n    <label class=\"form-check-label\" for=\"${name + '_' + i}\">${entry.value}</label>\n</div>\n`).join('');\n\n/**\n * Returns group's HTML\n * @param {string} group_id\n * @param {int} level\n * @returns {string}\n * @fires QueryBuilder.changer:getGroupTemplate\n * @private\n */\nQueryBuilder.prototype.getGroupTemplate = function(group_id, level) {\n    var h = this.templates.group({\n        builder: this,\n        group_id: group_id,\n        level: level,\n        conditions: this.settings.conditions,\n        icons: this.icons,\n        settings: this.settings,\n        translate: this.translate.bind(this)\n  }).trim();\n\n    /**\n     * Modifies the raw HTML of a group\n     * @event changer:getGroupTemplate\n     * @memberof QueryBuilder\n     * @param {string} html\n     * @param {int} level\n     * @returns {string}\n     */\n    return this.change('getGroupTemplate', h, level);\n};\n\n/**\n * Returns rule's HTML\n * @param {string} rule_id\n * @returns {string}\n * @fires QueryBuilder.changer:getRuleTemplate\n * @private\n */\nQueryBuilder.prototype.getRuleTemplate = function(rule_id) {\n    var h = this.templates.rule({\n        builder: this,\n        rule_id: rule_id,\n        icons: this.icons,\n        settings: this.settings,\n        translate: this.translate.bind(this)\n  }).trim();\n\n    /**\n     * Modifies the raw HTML of a rule\n     * @event changer:getRuleTemplate\n     * @memberof QueryBuilder\n     * @param {string} html\n     * @returns {string}\n     */\n    return this.change('getRuleTemplate', h);\n};\n\n/**\n * Returns rule's filter HTML\n * @param {Rule} rule\n * @param {object[]} filters\n * @returns {string}\n * @fires QueryBuilder.changer:getRuleFilterTemplate\n * @private\n */\nQueryBuilder.prototype.getRuleFilterSelect = function(rule, filters) {\n    var h = this.templates.filterSelect({\n        builder: this,\n        rule: rule,\n        filters: filters,\n        icons: this.icons,\n        settings: this.settings,\n        translate: this.translate.bind(this)\n  }).trim();\n\n    /**\n     * Modifies the raw HTML of the rule's filter dropdown\n     * @event changer:getRuleFilterSelect\n     * @memberof QueryBuilder\n     * @param {string} html\n     * @param {Rule} rule\n     * @param {QueryBuilder.Filter[]} filters\n     * @returns {string}\n     */\n    return this.change('getRuleFilterSelect', h, rule, filters);\n};\n\n/**\n * Returns rule's operator HTML\n * @param {Rule} rule\n * @param {object[]} operators\n * @returns {string}\n * @fires QueryBuilder.changer:getRuleOperatorTemplate\n * @private\n */\nQueryBuilder.prototype.getRuleOperatorSelect = function(rule, operators) {\n    var h = this.templates.operatorSelect({\n        builder: this,\n        rule: rule,\n        operators: operators,\n        icons: this.icons,\n        settings: this.settings,\n        translate: this.translate.bind(this)\n  }).trim();\n\n    /**\n     * Modifies the raw HTML of the rule's operator dropdown\n     * @event changer:getRuleOperatorSelect\n     * @memberof QueryBuilder\n     * @param {string} html\n     * @param {Rule} rule\n     * @param {QueryBuilder.Operator[]} operators\n     * @returns {string}\n     */\n    return this.change('getRuleOperatorSelect', h, rule, operators);\n};\n\n/**\n * Returns the rule's value select HTML\n * @param {string} name\n * @param {Rule} rule\n * @returns {string}\n * @fires QueryBuilder.changer:getRuleValueSelect\n * @private\n */\nQueryBuilder.prototype.getRuleValueSelect = function(name, rule) {\n    var h = this.templates.ruleValueSelect({\n        builder: this,\n        name: name,\n        rule: rule,\n        icons: this.icons,\n        settings: this.settings,\n        translate: this.translate.bind(this)\n  }).trim();\n\n    /**\n     * Modifies the raw HTML of the rule's value dropdown (in case of a \"select\" filter)\n     * @event changer:getRuleValueSelect\n     * @memberof QueryBuilder\n     * @param {string} html\n     * @param [string} name\n     * @param {Rule} rule\n     * @returns {string}\n     */\n    return this.change('getRuleValueSelect', h, name, rule);\n};\n\n/**\n * Returns the rule's value check/radio HTML\n * @param {string} name\n * @param {Rule} rule\n * @returns {string}\n * @fires QueryBuilder.changer:getRuleValueCheck\n * @private\n */\n QueryBuilder.prototype.getRuleValueCheck = function(name, rule) { //***\n  var h = this.templates.ruleValueCheck({\n      builder: this,\n      name: name,\n      rule: rule,\n      icons: this.icons,\n      settings: this.settings,\n      translate: this.translate.bind(this)\n  });\n\n  /**\n   * Modifies the raw HTML of the rule's value dropdown (in case of a \"checkbox\" or \"radio\" filter)\n   * @event changer:getRuleValueCheck\n   * @memberof QueryBuilder\n   * @param {string} html\n   * @param [string} name\n   * @param {Rule} rule\n   * @returns {string}\n   */\n  return this.change('getRuleValueCheck', h, name, rule);\n};\n\n/**\n * Returns the rule's value HTML\n * @param {Rule} rule\n * @param {int} value_id\n * @returns {string}\n * @fires QueryBuilder.changer:getRuleInput\n * @private\n */\nQueryBuilder.prototype.getRuleInput = function(rule, value_id) {\n    var filter = rule.filter;\n    var validation = rule.filter.validation || {};\n    var name = rule.id + '_value_' + value_id;\n    // var c = filter.vertical ? ' class=block' : '';\n    var h = '';\n    var placeholder = Array.isArray(filter.placeholder) ? filter.placeholder[value_id] : filter.placeholder;\n\n    if (typeof filter.input == 'function') {\n        h = filter.input.call(this, rule, name);\n    }\n    else {\n        switch (filter.input) {\n            case 'radio':\n            case 'checkbox':\n                h = this.getRuleValueCheck(name, rule); //***\n                break;\n\n            case 'select':\n                h = this.getRuleValueSelect(name, rule);\n                break;\n\n            case 'textarea':\n                h += '<textarea class=\"form-control\" name=\"' + name + '\"';\n                if (filter.size) h += ' cols=\"' + filter.size + '\"';\n                if (filter.rows) h += ' rows=\"' + filter.rows + '\"';\n                if (validation.min !== undefined) h += ' minlength=\"' + validation.min + '\"';\n                if (validation.max !== undefined) h += ' maxlength=\"' + validation.max + '\"';\n                if (placeholder) h += ' placeholder=\"' + placeholder + '\"';\n                h += '></textarea>';\n                break;\n\n            case 'number':\n                h += '<input class=\"form-control\" type=\"number\" name=\"' + name + '\"';\n                if (validation.step !== undefined) h += ' step=\"' + validation.step + '\"';\n                if (validation.min !== undefined) h += ' min=\"' + validation.min + '\"';\n                if (validation.max !== undefined) h += ' max=\"' + validation.max + '\"';\n                if (placeholder) h += ' placeholder=\"' + placeholder + '\"';\n                if (filter.size) h += ' size=\"' + filter.size + '\"';\n                h += '>';\n                break;\n\n            default:\n                h += '<input class=\"form-control\" type=\"text\" name=\"' + name + '\"';\n                if (placeholder) h += ' placeholder=\"' + placeholder + '\"';\n                if (filter.type === 'string' && validation.min !== undefined) h += ' minlength=\"' + validation.min + '\"';\n                if (filter.type === 'string' && validation.max !== undefined) h += ' maxlength=\"' + validation.max + '\"';\n                if (filter.size) h += ' size=\"' + filter.size + '\"';\n                h += '>';\n        }\n    }\n\n    /**\n     * Modifies the raw HTML of the rule's input\n     * @event changer:getRuleInput\n     * @memberof QueryBuilder\n     * @param {string} html\n     * @param {Rule} rule\n     * @param {string} name - the name that the input must have\n     * @returns {string}\n     */\n    return this.change('getRuleInput', h, rule, name);\n};\n\n\n/**\n * @namespace\n */\nvar Utils = {};\n\n/**\n * @member {object}\n * @memberof QueryBuilder\n * @see Utils\n */\nQueryBuilder.utils = Utils;\n\n/**\n * @callback Utils#OptionsIteratee\n * @param {string} key\n * @param {string} value\n * @param {string} [optgroup]\n */\n\n/**\n * Iterates over radio/checkbox/selection options, it accept four formats\n *\n * @example\n * // array of values\n * options = ['one', 'two', 'three']\n * @example\n * // simple key-value map\n * options = {1: 'one', 2: 'two', 3: 'three'}\n * @example\n * // array of 1-element maps\n * options = [{1: 'one'}, {2: 'two'}, {3: 'three'}]\n * @example\n * // array of elements\n * options = [{value: 1, label: 'one', optgroup: 'group'}, {value: 2, label: 'two'}]\n *\n * @param {object|array} options\n * @param {Utils#OptionsIteratee} tpl\n */\nUtils.iterateOptions = function(options, tpl) {\n    if (options) {\n        if (Array.isArray(options)) {\n            options.forEach(function(entry, index) { //***\n                if ($.isPlainObject(entry)) {\n                    // array of elements\n                    if ('value' in entry) {\n                        tpl(entry.value, entry.label || entry.value, entry.optgroup);\n                    }\n                    // array of one-element maps\n                    else {\n                        $.each(entry, function(key, val) {\n                            tpl(key, val);\n                            return false; // break after first entry\n                        });\n                    }\n                }\n                // array of values\n                else {\n                    tpl(entry, entry, index); //***\n                }\n            });\n        }\n        // unordered map\n        else {\n            $.each(options, function(key, val) {\n                tpl(key, val);\n            });\n        }\n    }\n};\n\n/**\n * Replaces {0}, {1}, ... in a string\n * @param {string} str\n * @param {...*} args\n * @returns {string}\n */\nUtils.fmt = function(str, args) {\n    if (!Array.isArray(args)) {\n        args = Array.prototype.slice.call(arguments, 1);\n    }\n\n    return str.replace(/{([0-9]+)}/g, function(m, i) {\n        return args[parseInt(i)];\n    });\n};\n\n/**\n * Throws an Error object with custom name or logs an error\n * @param {boolean} [doThrow=true]\n * @param {string} type\n * @param {string} message\n * @param {...*} args\n */\nUtils.error = function() {\n    var i = 0;\n    var doThrow = typeof arguments[i] === 'boolean' ? arguments[i++] : true;\n    var type = arguments[i++];\n    var message = arguments[i++];\n    var args = Array.isArray(arguments[i]) ? arguments[i] : Array.prototype.slice.call(arguments, i);\n\n    if (doThrow) {\n        var err = new Error(Utils.fmt(message, args));\n        err.name = type + 'Error';\n        err.args = args;\n        throw err;\n    }\n    else {\n        console.error(type + 'Error: ' + Utils.fmt(message, args));\n    }\n};\n\n/**\n * Changes the type of a value to int, float or bool //***\n * @param {*} value\n * @param {object} filter\n * @param {string} filter.type - 'integer', 'double', 'boolean' or anything else (passthrough)\n * @returns {*}\n */\nUtils.changeType = function(value, filter) {\n    if (value === '' || value === undefined) {\n        return undefined;\n    }\n\n    switch (filter.type) {\n        // @formatter:off\n        case 'integer':\n            // if (typeof value === 'string' && !/^-?\\d+$/.test(value)) {\n            //     return value;\n            // }\n            // return parseInt(value);\n        case 'double':\n            // if (typeof value === 'string' && !/^-?\\d+\\.?\\d*$/.test(value)) {\n            //     return value;\n            // }\n            // return parseFloat(value);\n            return ew.parseNumber(value);\n        case 'datetime':\n            return ew.parseDateTime(value, filter.data.format).toSQLDate();\n        case 'boolean':\n            return ew.convertToBool(value);\n        default:\n            return value;\n        // @formatter:on\n    }\n};\n\n/**\n * Escapes a string like PHP's mysql_real_escape_string does\n * @param {string} value\n * @param {string} [additionalEscape] additionnal chars to escape\n * @returns {string}\n */\nUtils.escapeString = function(value, additionalEscape) {\n    if (typeof value != 'string') {\n        return value;\n    }\n\n    var escaped = value\n        .replace(/[\\0\\n\\r\\b\\\\\\'\\\"]/g, function(s) {\n            switch (s) {\n                // @formatter:off\n                case '\\0': return '\\\\0';\n                case '\\n': return '\\\\n';\n                case '\\r': return '\\\\r';\n                case '\\b': return '\\\\b';\n                case '\\'': return '\\'\\'';\n                default:   return '\\\\' + s;\n                // @formatter:off\n            }\n        })\n        // uglify compliant\n        .replace(/\\t/g, '\\\\t')\n        .replace(/\\x1a/g, '\\\\Z');\n\n    if (additionalEscape) {\n        escaped = escaped\n            .replace(new RegExp('[' + additionalEscape + ']', 'g'), function(s) {\n                return '\\\\' + s;\n            });\n    }\n\n    return escaped;\n};\n\n/**\n * Escapes a string for use in regex\n * @param {string} str\n * @returns {string}\n */\nUtils.escapeRegExp = function(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n};\n\n/**\n * Escapes a string for use in HTML element id\n * @param {string} str\n * @returns {string}\n */\nUtils.escapeElementId = function(str) {\n    // Regex based on that suggested by:\n    // https://learn.jquery.com/using-jquery-core/faq/how-do-i-select-an-element-by-an-id-that-has-characters-used-in-css-notation/\n    // - escapes : . [ ] ,\n    // - avoids escaping already escaped values\n    return (str) ? str.replace(/(\\\\)?([:.\\[\\],])/g,\n            function( $0, $1, $2 ) { return $1 ? $0 : '\\\\' + $2; }) : str;\n};\n\n/**\n * Sorts objects by grouping them by `key`, preserving initial order when possible\n * @param {object[]} items\n * @param {string} key\n * @returns {object[]}\n */\nUtils.groupSort = function(items, key) {\n    var optgroups = [];\n    var newItems = [];\n\n    items.forEach(function(item) {\n        var idx;\n\n        if (item[key]) {\n            idx = optgroups.lastIndexOf(item[key]);\n\n            if (idx == -1) {\n                idx = optgroups.length;\n            }\n            else {\n                idx++;\n            }\n        }\n        else {\n            idx = optgroups.length;\n        }\n\n        optgroups.splice(idx, 0, item[key]);\n        newItems.splice(idx, 0, item);\n    });\n\n    return newItems;\n};\n\n/**\n * Defines properties on an Node prototype with getter and setter.<br>\n *     Update events are emitted in the setter through root Model (if any).<br>\n *     The object must have a `__` object, non enumerable property to store values.\n * @param {function} obj\n * @param {string[]} fields\n */\nUtils.defineModelProperties = function(obj, fields) {\n    fields.forEach(function(field) {\n        Object.defineProperty(obj.prototype, field, {\n            enumerable: true,\n            get: function() {\n                return this.__[field];\n            },\n            set: function(value) {\n                var previousValue = (this.__[field] !== null && typeof this.__[field] == 'object') ?\n                    $.extend({}, this.__[field]) :\n                    this.__[field];\n\n                this.__[field] = value;\n\n                if (this.model !== null) {\n                    /**\n                     * After a value of the model changed\n                     * @event model:update\n                     * @memberof Model\n                     * @param {Node} node\n                     * @param {string} field\n                     * @param {*} value\n                     * @param {*} previousValue\n                     */\n                    this.model.trigger('update', this, field, value, previousValue);\n                }\n            }\n        });\n    });\n};\n\n\n/**\n * Main object storing data model and emitting model events\n * @constructor\n */\nfunction Model() {\n    /**\n     * @member {Group}\n     * @readonly\n     */\n    this.root = null;\n\n    /**\n     * Base for event emitting\n     * @member {jQuery}\n     * @readonly\n     * @private\n     */\n    this.$ = $(this);\n}\n\n$.extend(Model.prototype, /** @lends Model.prototype */ {\n    /**\n     * Triggers an event on the model\n     * @param {string} type\n     * @returns {$.Event}\n     */\n    trigger: function(type) {\n        var event = new $.Event(type);\n        this.$.triggerHandler(event, Array.prototype.slice.call(arguments, 1));\n        return event;\n    },\n\n    /**\n     * Attaches an event listener on the model\n     * @param {string} type\n     * @param {function} cb\n     * @returns {Model}\n     */\n    on: function() {\n        this.$.on.apply(this.$, Array.prototype.slice.call(arguments));\n        return this;\n    },\n\n    /**\n     * Removes an event listener from the model\n     * @param {string} type\n     * @param {function} [cb]\n     * @returns {Model}\n     */\n    off: function() {\n        this.$.off.apply(this.$, Array.prototype.slice.call(arguments));\n        return this;\n    },\n\n    /**\n     * Attaches an event listener called once on the model\n     * @param {string} type\n     * @param {function} cb\n     * @returns {Model}\n     */\n    once: function() {\n        this.$.one.apply(this.$, Array.prototype.slice.call(arguments));\n        return this;\n    }\n});\n\n\n/**\n * Root abstract object\n * @constructor\n * @param {Node} [parent]\n * @param {jQuery} $el\n */\nvar Node = function(parent, $el) {\n    if (!(this instanceof Node)) {\n        return new Node(parent, $el);\n    }\n\n    Object.defineProperty(this, '__', { value: {} });\n\n    $el.data('queryBuilderModel', this);\n\n    /**\n     * @name level\n     * @member {int}\n     * @memberof Node\n     * @instance\n     * @readonly\n     */\n    this.__.level = 1;\n\n    /**\n     * @name error\n     * @member {string}\n     * @memberof Node\n     * @instance\n     */\n    this.__.error = null;\n\n    /**\n     * @name flags\n     * @member {object}\n     * @memberof Node\n     * @instance\n     * @readonly\n     */\n    this.__.flags = {};\n\n    /**\n     * @name data\n     * @member {object}\n     * @memberof Node\n     * @instance\n     */\n    this.__.data = undefined;\n\n    /**\n     * @member {jQuery}\n     * @readonly\n     */\n    this.$el = $el;\n\n    /**\n     * @member {string}\n     * @readonly\n     */\n    this.id = $el[0].id;\n\n    /**\n     * @member {Model}\n     * @readonly\n     */\n    this.model = null;\n\n    /**\n     * @member {Group}\n     * @readonly\n     */\n    this.parent = parent;\n};\n\nUtils.defineModelProperties(Node, ['level', 'error', 'data', 'flags']);\n\nObject.defineProperty(Node.prototype, 'parent', {\n    enumerable: true,\n    get: function() {\n        return this.__.parent;\n    },\n    set: function(value) {\n        this.__.parent = value;\n        this.level = value === null ? 1 : value.level + 1;\n        this.model = value === null ? null : value.model;\n    }\n});\n\n/**\n * Checks if this Node is the root\n * @returns {boolean}\n */\nNode.prototype.isRoot = function() {\n    return (this.level === 1);\n};\n\n/**\n * Returns the node position inside its parent\n * @returns {int}\n */\nNode.prototype.getPos = function() {\n    if (this.isRoot()) {\n        return -1;\n    }\n    else {\n        return this.parent.getNodePos(this);\n    }\n};\n\n/**\n * Deletes self\n * @fires Model.model:drop\n */\nNode.prototype.drop = function() {\n    var model = this.model;\n\n    if (!!this.parent) {\n        this.parent.removeNode(this);\n    }\n\n    this.$el.removeData('queryBuilderModel');\n\n    if (model !== null) {\n        /**\n         * After a node of the model has been removed\n         * @event model:drop\n         * @memberof Model\n         * @param {Node} node\n         */\n        model.trigger('drop', this);\n    }\n};\n\n/**\n * Moves itself after another Node\n * @param {Node} target\n * @fires Model.model:move\n */\nNode.prototype.moveAfter = function(target) {\n    if (!this.isRoot()) {\n        this.move(target.parent, target.getPos() + 1);\n    }\n};\n\n/**\n * Moves itself at the beginning of parent or another Group\n * @param {Group} [target]\n * @fires Model.model:move\n */\nNode.prototype.moveAtBegin = function(target) {\n    if (!this.isRoot()) {\n        if (target === undefined) {\n            target = this.parent;\n        }\n\n        this.move(target, 0);\n    }\n};\n\n/**\n * Moves itself at the end of parent or another Group\n * @param {Group} [target]\n * @fires Model.model:move\n */\nNode.prototype.moveAtEnd = function(target) {\n    if (!this.isRoot()) {\n        if (target === undefined) {\n            target = this.parent;\n        }\n\n        this.move(target, target.length() === 0 ? 0 : target.length() - 1);\n    }\n};\n\n/**\n * Moves itself at specific position of Group\n * @param {Group} target\n * @param {int} index\n * @fires Model.model:move\n */\nNode.prototype.move = function(target, index) {\n    if (!this.isRoot()) {\n        if (typeof target === 'number') {\n            index = target;\n            target = this.parent;\n        }\n\n        this.parent.removeNode(this);\n        target.insertNode(this, index, false);\n\n        if (this.model !== null) {\n            /**\n             * After a node of the model has been moved\n             * @event model:move\n             * @memberof Model\n             * @param {Node} node\n             * @param {Node} target\n             * @param {int} index\n             */\n            this.model.trigger('move', this, target, index);\n        }\n    }\n};\n\n\n/**\n * Group object\n * @constructor\n * @extends Node\n * @param {Group} [parent]\n * @param {jQuery} $el\n */\nvar Group = function(parent, $el) {\n    if (!(this instanceof Group)) {\n        return new Group(parent, $el);\n    }\n\n    Node.call(this, parent, $el);\n\n    /**\n     * @member {object[]}\n     * @readonly\n     */\n    this.rules = [];\n\n    /**\n     * @name condition\n     * @member {string}\n     * @memberof Group\n     * @instance\n     */\n    this.__.condition = null;\n};\n\nGroup.prototype = Object.create(Node.prototype);\nGroup.prototype.constructor = Group;\n\nUtils.defineModelProperties(Group, ['condition']);\n\n/**\n * Removes group's content\n */\nGroup.prototype.empty = function() {\n    this.each('reverse', function(rule) {\n        rule.drop();\n    }, function(group) {\n        group.drop();\n    });\n};\n\n/**\n * Deletes self\n */\nGroup.prototype.drop = function() {\n    this.empty();\n    Node.prototype.drop.call(this);\n};\n\n/**\n * Returns the number of children\n * @returns {int}\n */\nGroup.prototype.length = function() {\n    return this.rules.length;\n};\n\n/**\n * Adds a Node at specified index\n * @param {Node} node\n * @param {int} [index=end]\n * @param {boolean} [trigger=false] - fire 'add' event\n * @returns {Node} the inserted node\n * @fires Model.model:add\n */\nGroup.prototype.insertNode = function(node, index, trigger) {\n    if (index === undefined) {\n        index = this.length();\n    }\n\n    this.rules.splice(index, 0, node);\n    node.parent = this;\n\n    if (trigger && this.model !== null) {\n        /**\n         * After a node of the model has been added\n         * @event model:add\n         * @memberof Model\n         * @param {Node} parent\n         * @param {Node} node\n         * @param {int} index\n         */\n        this.model.trigger('add', this, node, index);\n    }\n\n    return node;\n};\n\n/**\n * Adds a new Group at specified index\n * @param {jQuery} $el\n * @param {int} [index=end]\n * @returns {Group}\n * @fires Model.model:add\n */\nGroup.prototype.addGroup = function($el, index) {\n    return this.insertNode(new Group(this, $el), index, true);\n};\n\n/**\n * Adds a new Rule at specified index\n * @param {jQuery} $el\n * @param {int} [index=end]\n * @returns {Rule}\n * @fires Model.model:add\n */\nGroup.prototype.addRule = function($el, index) {\n    return this.insertNode(new Rule(this, $el), index, true);\n};\n\n/**\n * Deletes a specific Node\n * @param {Node} node\n */\nGroup.prototype.removeNode = function(node) {\n    var index = this.getNodePos(node);\n    if (index !== -1) {\n        node.parent = null;\n        this.rules.splice(index, 1);\n    }\n};\n\n/**\n * Returns the position of a child Node\n * @param {Node} node\n * @returns {int}\n */\nGroup.prototype.getNodePos = function(node) {\n    return this.rules.indexOf(node);\n};\n\n/**\n * @callback Model#GroupIteratee\n * @param {Node} node\n * @returns {boolean} stop the iteration\n */\n\n/**\n * Iterate over all Nodes\n * @param {boolean} [reverse=false] - iterate in reverse order, required if you delete nodes\n * @param {Model#GroupIteratee} cbRule - callback for Rules (can be `null` but not omitted)\n * @param {Model#GroupIteratee} [cbGroup] - callback for Groups\n * @param {object} [context] - context for callbacks\n * @returns {boolean} if the iteration has been stopped by a callback\n */\nGroup.prototype.each = function(reverse, cbRule, cbGroup, context) {\n    if (typeof reverse !== 'boolean' && typeof reverse !== 'string') {\n        context = cbGroup;\n        cbGroup = cbRule;\n        cbRule = reverse;\n        reverse = false;\n    }\n    context = context === undefined ? null : context;\n\n    var i = reverse ? this.rules.length - 1 : 0;\n    var l = reverse ? 0 : this.rules.length - 1;\n    var c = reverse ? -1 : 1;\n    var next = function() {\n        return reverse ? i >= l : i <= l;\n    };\n    var stop = false;\n\n    for (; next(); i += c) {\n        if (this.rules[i] instanceof Group) {\n            if (!!cbGroup) {\n                stop = cbGroup.call(context, this.rules[i]) === false;\n            }\n        }\n        else if (!!cbRule) {\n            stop = cbRule.call(context, this.rules[i]) === false;\n        }\n\n        if (stop) {\n            break;\n        }\n    }\n\n    return !stop;\n};\n\n/**\n * Checks if the group contains a particular Node\n * @param {Node} node\n * @param {boolean} [recursive=false]\n * @returns {boolean}\n */\nGroup.prototype.contains = function(node, recursive) {\n    if (this.getNodePos(node) !== -1) {\n        return true;\n    }\n    else if (!recursive) {\n        return false;\n    }\n    else {\n        // the loop will return with false as soon as the Node is found\n        return !this.each(function() {\n            return true;\n        }, function(group) {\n            return !group.contains(node, true);\n        });\n    }\n};\n\n\n/**\n * Rule object\n * @constructor\n * @extends Node\n * @param {Group} parent\n * @param {jQuery} $el\n */\nvar Rule = function(parent, $el) {\n    if (!(this instanceof Rule)) {\n        return new Rule(parent, $el);\n    }\n\n    Node.call(this, parent, $el);\n\n    this._updating_value = false;\n    this._updating_input = false;\n\n    /**\n     * @name filter\n     * @member {QueryBuilder.Filter}\n     * @memberof Rule\n     * @instance\n     */\n    this.__.filter = null;\n\n    /**\n     * @name operator\n     * @member {QueryBuilder.Operator}\n     * @memberof Rule\n     * @instance\n     */\n    this.__.operator = null;\n\n    /**\n     * @name value\n     * @member {*}\n     * @memberof Rule\n     * @instance\n     */\n    this.__.value = undefined;\n};\n\nRule.prototype = Object.create(Node.prototype);\nRule.prototype.constructor = Rule;\n\nUtils.defineModelProperties(Rule, ['filter', 'operator', 'value']);\n\n/**\n * Checks if this Node is the root\n * @returns {boolean} always false\n */\nRule.prototype.isRoot = function() {\n    return false;\n};\n\n\n/**\n * @member {function}\n * @memberof QueryBuilder\n * @see Group\n */\nQueryBuilder.Group = Group;\n\n/**\n * @member {function}\n * @memberof QueryBuilder\n * @see Rule\n */\nQueryBuilder.Rule = Rule;\n\n\n/**\n * The {@link http://learn.jquery.com/plugins/|jQuery Plugins} namespace\n * @external \"jQuery.fn\"\n */\n\n/**\n * Instanciates or accesses the {@link QueryBuilder} on an element\n * @function\n * @memberof external:\"jQuery.fn\"\n * @param {*} option - initial configuration or method name\n * @param {...*} args - method arguments\n *\n * @example\n * $('#builder').queryBuilder({ /** configuration object *\\/ });\n * @example\n * $('#builder').queryBuilder('methodName', methodParam1, methodParam2);\n */\n$.fn.queryBuilder = function(option) {\n    if (this.length === 0) {\n        Utils.error('Config', 'No target defined');\n    }\n    if (this.length > 1) {\n        Utils.error('Config', 'Unable to initialize on multiple target');\n    }\n\n    var data = this.data('queryBuilder');\n    var options = (typeof option == 'object' && option) || {};\n\n    if (!data && option == 'destroy') {\n        return this;\n    }\n    if (!data) {\n        var builder = new QueryBuilder(this, options);\n        this.data('queryBuilder', builder);\n        builder.init(options.rules);\n    }\n    if (typeof option == 'string') {\n        return data[option].apply(data, Array.prototype.slice.call(arguments, 1));\n    }\n\n    return this;\n};\n\n/**\n * @function\n * @memberof external:\"jQuery.fn\"\n * @see QueryBuilder\n */\n$.fn.queryBuilder.constructor = QueryBuilder;\n\n/**\n * @function\n * @memberof external:\"jQuery.fn\"\n * @see QueryBuilder.defaults\n */\n$.fn.queryBuilder.defaults = QueryBuilder.defaults;\n\n/**\n * @function\n * @memberof external:\"jQuery.fn\"\n * @see QueryBuilder.defaults\n */\n$.fn.queryBuilder.extend = QueryBuilder.extend;\n\n/**\n * @function\n * @memberof external:\"jQuery.fn\"\n * @see QueryBuilder.define\n */\n$.fn.queryBuilder.define = QueryBuilder.define;\n\n/**\n * @function\n * @memberof external:\"jQuery.fn\"\n * @see QueryBuilder.regional\n */\n$.fn.queryBuilder.regional = QueryBuilder.regional;\n\n\n/**\n * @class ChangeFilters\n * @memberof module:plugins\n * @description Allows to change available filters after plugin initialization.\n */\n\nQueryBuilder.extend(/** @lends module:plugins.ChangeFilters.prototype */ {\n    /**\n     * Change the filters of the builder\n     * @param {boolean} [deleteOrphans=false] - delete rules using old filters\n     * @param {QueryBuilder[]} filters\n     * @fires module:plugins.ChangeFilters.changer:setFilters\n     * @fires module:plugins.ChangeFilters.afterSetFilters\n     * @throws ChangeFilterError\n     */\n    setFilters: function(deleteOrphans, filters) {\n        var self = this;\n\n        if (filters === undefined) {\n            filters = deleteOrphans;\n            deleteOrphans = false;\n        }\n\n        filters = this.checkFilters(filters);\n\n        /**\n         * Modifies the filters before {@link module:plugins.ChangeFilters.setFilters} method\n         * @event changer:setFilters\n         * @memberof module:plugins.ChangeFilters\n         * @param {QueryBuilder.Filter[]} filters\n         * @returns {QueryBuilder.Filter[]}\n         */\n        filters = this.change('setFilters', filters);\n\n        var filtersIds = filters.map(function(filter) {\n            return filter.id;\n        });\n\n        // check for orphans\n        if (!deleteOrphans) {\n            (function checkOrphans(node) {\n                node.each(\n                    function(rule) {\n                        if (rule.filter && filtersIds.indexOf(rule.filter.id) === -1) {\n                            Utils.error('ChangeFilter', 'A rule is using filter \"{0}\"', rule.filter.id);\n                        }\n                    },\n                    checkOrphans\n                );\n            }(this.model.root));\n        }\n\n        // replace filters\n        this.filters = filters;\n\n        // apply on existing DOM\n        (function updateBuilder(node) {\n            node.each(true,\n                function(rule) {\n                    if (rule.filter && filtersIds.indexOf(rule.filter.id) === -1) {\n                        rule.drop();\n\n                        self.trigger('rulesChanged');\n                    }\n                    else {\n                        self.createRuleFilters(rule);\n\n                        rule.$el.find(QueryBuilder.selectors.rule_filter).val(rule.filter ? rule.filter.id : '-1');\n                        self.trigger('afterUpdateRuleFilter', rule);\n                    }\n                },\n                updateBuilder\n            );\n        }(this.model.root));\n\n        // update plugins\n        if (this.settings.plugins) {\n            if (this.settings.plugins['unique-filter']) {\n                this.updateDisabledFilters();\n            }\n            if (this.settings.plugins['bt-selectpicker']) {\n                this.$el.find(QueryBuilder.selectors.rule_filter).selectpicker('render');\n            }\n        }\n\n        // reset the default_filter if does not exist anymore\n        if (this.settings.default_filter) {\n            try {\n                this.getFilterById(this.settings.default_filter);\n            }\n            catch (e) {\n                this.settings.default_filter = null;\n            }\n        }\n\n        /**\n         * After {@link module:plugins.ChangeFilters.setFilters} method\n         * @event afterSetFilters\n         * @memberof module:plugins.ChangeFilters\n         * @param {QueryBuilder.Filter[]} filters\n         */\n        this.trigger('afterSetFilters', filters);\n    },\n\n    /**\n     * Adds a new filter to the builder\n     * @param {QueryBuilder.Filter|Filter[]} newFilters\n     * @param {int|string} [position=#end] - index or '#start' or '#end'\n     * @fires module:plugins.ChangeFilters.changer:setFilters\n     * @fires module:plugins.ChangeFilters.afterSetFilters\n     * @throws ChangeFilterError\n     */\n    addFilter: function(newFilters, position) {\n        if (position === undefined || position == '#end') {\n            position = this.filters.length;\n        }\n        else if (position == '#start') {\n            position = 0;\n        }\n\n        if (!Array.isArray(newFilters)) {\n            newFilters = [newFilters];\n        }\n\n        var filters = $.extend(true, [], this.filters);\n\n        // numeric position\n        if (parseInt(position) == position) {\n            Array.prototype.splice.apply(filters, [position, 0].concat(newFilters));\n        }\n        else {\n            // after filter by its id\n            if (this.filters.some(function(filter, index) {\n                    if (filter.id == position) {\n                        position = index + 1;\n                        return true;\n                    }\n                })\n            ) {\n                Array.prototype.splice.apply(filters, [position, 0].concat(newFilters));\n            }\n            // defaults to end of list\n            else {\n                Array.prototype.push.apply(filters, newFilters);\n            }\n        }\n\n        this.setFilters(filters);\n    },\n\n    /**\n     * Removes a filter from the builder\n     * @param {string|string[]} filterIds\n     * @param {boolean} [deleteOrphans=false] delete rules using old filters\n     * @fires module:plugins.ChangeFilters.changer:setFilters\n     * @fires module:plugins.ChangeFilters.afterSetFilters\n     * @throws ChangeFilterError\n     */\n    removeFilter: function(filterIds, deleteOrphans) {\n        var filters = $.extend(true, [], this.filters);\n        if (typeof filterIds === 'string') {\n            filterIds = [filterIds];\n        }\n\n        filters = filters.filter(function(filter) {\n            return filterIds.indexOf(filter.id) === -1;\n        });\n\n        this.setFilters(deleteOrphans, filters);\n    }\n});\n\n\n/**\n * @class FilterDescription\n * @memberof module:plugins\n * @description Provides three ways to display a description about a filter: inline or Bootsrap Popover\n * @param {object} [options]\n * @param {string} [options.icon='fa-solid fa-info']\n * @param {string} [options.mode='tooltip'] - inline or tooltip\n */\nQueryBuilder.define('filter-description', function(options) {\n    // Inline\n    if (options.mode === 'inline') {\n        this.on('afterUpdateRuleFilter afterUpdateRuleOperator', function(e, rule) {\n            var $p = rule.$el.find('p.filter-description');\n            var description = e.builder.getFilterDescription(rule.filter, rule);\n\n            if (!description) {\n                $p.hide();\n            }\n            else {\n                if ($p.length === 0) {\n                    $p = $($.parseHTML('<p class=\"filter-description\"></p>'));\n                    $p.appendTo(rule.$el);\n                }\n                else {\n                    $p.css('display', '');\n                }\n\n                $p.html('<i class=\"' + options.icon + '\"></i> ' + description);\n            }\n        });\n    }\n    // Tooltip\n    else if (options.mode === 'tooltip') {\n        this.on('afterUpdateRuleFilter afterUpdateRuleOperator', function(e, rule) {\n            var $b = rule.$el.find('button.filter-description');\n            var description = e.builder.getFilterDescription(rule.filter, rule);\n\n            if (!description) {\n                $b.hide();\n                bootstrap.Tooltip.getInstance($b)?.hide();\n                // if ($b.data('bs.tooltip')) {\n                //     $b.tooltip('hide');\n                // }\n            }\n            else {\n                if ($b.length === 0) {\n                    $b = $($.parseHTML('<button type=\"button\" class=\"btn btn-sm btn-light filter-description float-end me-2\" data-bs-toggle=\"tooltip\"><i class=\"' + options.icon + '\"></i></button>'));\n                    rule.$el.find(QueryBuilder.selectors.rule_actions).after($b);\n\n                    // $b.tooltip({\n                    new bootstrap.Tooltip($b, {\n                        placement: document.dir == 'rtl' ? 'right' : 'left',\n                        container: e.builder.$el[0],\n                        html: true,\n                        trigger: 'hover',\n                        title: description\n                    });\n\n                    // $b.on('mouseout', function() {\n                    //     $b.tooltip('hide');\n                    // });\n                }\n                else {\n                    $b.css('display', '');\n                }\n\n                if ($b.attr('aria-describedby')) {\n                    bootstrap.Tooltip.getInstance($b)?.show();\n                    // $b.tooltip('show');\n                }\n            }\n        });\n    }\n}, {\n    icon: 'fa-solid fa-info',\n    mode: 'tooltip'\n});\n\nQueryBuilder.extend(/** @lends module:plugins.FilterDescription.prototype */ {\n    /**\n     * Returns the description of a filter for a particular rule (if present)\n     * @param {object} filter\n     * @param {Rule} [rule]\n     * @returns {string}\n     * @private\n     */\n    getFilterDescription: function(filter, rule) {\n        if (!filter) {\n            return undefined;\n        }\n        else if (typeof filter.description == 'function') {\n            return filter.description.call(this, rule);\n        }\n        else {\n            return filter.description;\n        }\n    }\n});\n\n\n/**\n * @class Invert\n * @memberof module:plugins\n * @description Allows to invert a rule operator, a group condition or the entire builder.\n * @param {object} [options]\n * @param {string} [options.icon='fa-solid fa-shuffle']\n * @param {boolean} [options.recursive=true]\n * @param {boolean} [options.invert_rules=true]\n * @param {boolean} [options.display_rules_button=false]\n * @param {boolean} [options.silent_fail=false]\n */\nQueryBuilder.define('invert', function(options) {\n    var self = this;\n    var Selectors = QueryBuilder.selectors;\n\n    // Bind events\n    this.on('afterInit', function () {\n        self.$el.on('click.queryBuilder', '[data-invert=group]', function() {\n            var $group = $(this).closest(Selectors.group_container);\n            self.invert(self.getModel($group), options);\n        });\n\n        if (options.display_rules_button && options.invert_rules) {\n            self.$el.on('click.queryBuilder', '[data-invert=rule]', function() {\n                var $rule = $(this).closest(Selectors.rule_container);\n                self.invert(self.getModel($rule), options);\n            });\n        }\n    });\n\n    // Modify templates\n    if (!options.disable_template) {\n        this.on('getGroupTemplate.filter', function(h) {\n            var $h = $($.parseHTML(h.value));\n            $h.find(Selectors.condition_container).after(\n`<button\n    type=\"button\"\n    class=\"btn btn-sm btn-secondary\"\n    data-bs-toggle=\"tooltip\"\n    title=\"${self.translate('invert')}\" \n    data-invert=\"group\">\n    <i class=\"${options.icon}\"></i>\n</button>`\n            );\n            h.value = $h.prop('outerHTML');\n        });\n\n        if (options.display_rules_button && options.invert_rules) {\n            this.on('getRuleTemplate.filter', function(h) {\n                var $h = $($.parseHTML(h.value));\n                $h.find(Selectors.rule_actions).after(\n`<button\n    type=\"button\"\n    class=\"btn btn-sm btn-secondary\"\n    data-bs-toggle=\"tooltip\"\n    title=\"${self.translate('invert')}\" \n    data-invert=\"rule\">\n    <i class=\"${options.icon}\"></i>\n</button>`\n                );\n                h.value = $h.prop('outerHTML');\n            });\n        }\n    }\n}, {\n    icon: 'fa-solid fa-shuffle',\n    recursive: true,\n    invert_rules: true,\n    display_rules_button: false,\n    silent_fail: false,\n    disable_template: false\n});\n\nQueryBuilder.defaults({\n    operatorOpposites: {\n        'equal':            'not_equal',\n        'not_equal':        'equal',\n        'in':               'not_in',\n        'not_in':           'in',\n        'less':             'greater_or_equal',\n        'less_or_equal':    'greater',\n        'greater':          'less_or_equal',\n        'greater_or_equal': 'less',\n        'between':          'not_between',\n        'not_between':      'between',\n        'begins_with':      'not_begins_with',\n        'not_begins_with':  'begins_with',\n        'contains':         'not_contains',\n        'not_contains':     'contains',\n        'ends_with':        'not_ends_with',\n        'not_ends_with':    'ends_with',\n        'is_empty':         'is_not_empty',\n        'is_not_empty':     'is_empty',\n        'is_null':          'is_not_null',\n        'is_not_null':      'is_null'\n    },\n\n    conditionOpposites: {\n        'AND': 'OR',\n        'OR': 'AND'\n    }\n});\n\nQueryBuilder.extend(/** @lends module:plugins.Invert.prototype */ {\n    /**\n     * Invert a Group, a Rule or the whole builder\n     * @param {Node} [node]\n     * @param {object} [options] {@link module:plugins.Invert}\n     * @fires module:plugins.Invert.afterInvert\n     * @throws InvertConditionError, InvertOperatorError\n     */\n    invert: function(node, options) {\n        if (!(node instanceof Node)) {\n            if (!this.model.root) return;\n            options = node;\n            node = this.model.root;\n        }\n\n        if (typeof options != 'object') options = {};\n        if (options.recursive === undefined) options.recursive = true;\n        if (options.invert_rules === undefined) options.invert_rules = true;\n        if (options.silent_fail === undefined) options.silent_fail = false;\n        if (options.trigger === undefined) options.trigger = true;\n\n        if (node instanceof Group) {\n            // invert group condition\n            if (this.settings.conditionOpposites[node.condition]) {\n                node.condition = this.settings.conditionOpposites[node.condition];\n            }\n            else if (!options.silent_fail) {\n                Utils.error('InvertCondition', 'Unknown inverse of condition \"{0}\"', node.condition);\n            }\n\n            // recursive call\n            if (options.recursive) {\n                var tempOpts = $.extend({}, options, { trigger: false });\n                node.each(function(rule) {\n                    if (options.invert_rules) {\n                        this.invert(rule, tempOpts);\n                    }\n                }, function(group) {\n                    this.invert(group, tempOpts);\n                }, this);\n            }\n        }\n        else if (node instanceof Rule) {\n            if (node.operator && node.filter && !node.filter.no_invert) { //***\n                // invert rule operator\n                if (this.settings.operatorOpposites[node.operator.type]) {\n                    var invert = this.settings.operatorOpposites[node.operator.type];\n                    // check if the invert is \"authorized\"\n                    if (!node.filter.operators || node.filter.operators.indexOf(invert) != -1) {\n                        node.operator = this.getOperatorByType(invert);\n                    }\n                }\n                else if (!options.silent_fail) {\n                    Utils.error('InvertOperator', 'Unknown inverse of operator \"{0}\"', node.operator.type);\n                }\n            }\n        }\n\n        if (options.trigger) {\n            /**\n             * After {@link module:plugins.Invert.invert} method\n             * @event afterInvert\n             * @memberof module:plugins.Invert\n             * @param {Node} node - the main group or rule that has been modified\n             * @param {object} options\n             */\n            this.trigger('afterInvert', node, options);\n\n            this.trigger('rulesChanged');\n        }\n    }\n});\n\n\n/**\n * @class NotGroup\n * @memberof module:plugins\n * @description Adds a \"Not\" checkbox in front of group conditions.\n * @param {object} [options]\n */\nQueryBuilder.define('not-group', function(options) {\n    var self = this;\n\n    // Bind events\n    this.on('afterInit', function() {\n        self.$el.on('click.queryBuilder', '[data-not=group]', function() {\n            var $group = $(this).closest(QueryBuilder.selectors.group_container);\n            var group = self.getModel($group);\n            group.not = !group.not;\n        });\n\n        self.model.on('update', function(e, node, field) {\n            if (node instanceof Group && field === 'not') {\n                self.updateGroupNot(node);\n            }\n        });\n    });\n\n    // Init \"not\" property\n    this.on('afterAddGroup', function(e, group) {\n        group.__.not = false;\n    });\n\n    // Modify templates\n    if (!options.disable_template) {\n        this.on('getGroupTemplate.filter', function(h) {\n            var $h = $($.parseHTML(h.value));\n            $h.find(QueryBuilder.selectors.condition_container).before(`<div class=\"form-check form-switch float-start me-2\">\n    <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" data-not=\"group\">\n    <label class=\"form-check-label\">${self.translate('NOT')}</label>\n</div>`);\n            h.value = $h.prop('outerHTML');\n        });\n    }\n\n    // Export \"not\" to JSON\n    this.on('groupToJson.filter', function(e, group) {\n        e.value.not = group.not;\n    });\n\n    // Read \"not\" from JSON\n    this.on('jsonToGroup.filter', function(e, json) {\n        e.value.not = !!json.not;\n    });\n\n    // Export \"not\" to SQL\n    this.on('groupToSQL.filter', function(e, group) {\n        if (group.not) {\n            e.value = 'NOT ( ' + e.value + ' )';\n        }\n    });\n\n    // Parse \"NOT\" function from sqlparser\n    this.on('parseSQLNode.filter', function(e) {\n        if (e.value.name && e.value.name.toUpperCase() == 'NOT') {\n            e.value = e.value.arguments.value[0];\n\n            // if the there is no sub-group, create one\n            if (['AND', 'OR'].indexOf(e.value.operation.toUpperCase()) === -1) {\n                e.value = new SQLParser.nodes.Op(\n                    self.settings.default_condition,\n                    e.value,\n                    null\n                );\n            }\n\n            e.value.not = true;\n        }\n    });\n\n    // Request to create sub-group if the \"not\" flag is set\n    this.on('sqlGroupsDistinct.filter', function(e, group, data, i) {\n        if (data.not && i > 0) {\n            e.value = true;\n        }\n    });\n\n    // Read \"not\" from parsed SQL\n    this.on('sqlToGroup.filter', function(e, data) {\n        e.value.not = !!data.not;\n    });\n\n    // Export \"not\" to Mongo\n    this.on('groupToMongo.filter', function(e, group) {\n        var key = '$' + group.condition.toLowerCase();\n        if (group.not && e.value[key]) {\n            e.value = { '$nor': [e.value] };\n        }\n    });\n\n    // Parse \"$nor\" operator from Mongo\n    this.on('parseMongoNode.filter', function(e) {\n        var keys = Object.keys(e.value);\n\n        if (keys[0] == '$nor') {\n            e.value = e.value[keys[0]][0];\n            e.value.not = true;\n        }\n    });\n\n    // Read \"not\" from parsed Mongo\n    this.on('mongoToGroup.filter', function(e, data) {\n        e.value.not = !!data.not;\n    });\n}, {\n    disable_template: false\n});\n\n/**\n * From {@link module:plugins.NotGroup}\n * @name not\n * @member {boolean}\n * @memberof Group\n * @instance\n */\nUtils.defineModelProperties(Group, ['not']);\n\nQueryBuilder.extend(/** @lends module:plugins.NotGroup.prototype */ {\n    /**\n     * Performs actions when a group's not changes\n     * @param {Group} group\n     * @fires module:plugins.NotGroup.afterUpdateGroupNot\n     * @private\n     */\n    updateGroupNot: function(group) {\n        /**\n         * After the group's not flag has been modified\n         * @event afterUpdateGroupNot\n         * @memberof module:plugins.NotGroup\n         * @param {Group} group\n         */\n        this.trigger('afterUpdateGroupNot', group);\n\n        this.trigger('rulesChanged');\n    }\n});\n\n\n/**\n * @class Select2\n * @memberof module:plugins\n * @descriptioon Applies Select2 on filters, operators and values selection lists\n * @param {object} [options]\n */\nQueryBuilder.define('select2', function(options) {\n    var Selectors = QueryBuilder.selectors;\n\n    // Init Select2\n    this.on('afterCreateRuleFilters', function (e, rule) {\n        var filter = rule.filter;\n        if (options.applyToFilter)\n            rule.$el.find(Selectors.rule_filter).select2(options.filterSelect2Options ?? {});\n        if (options.applyToOperator)\n            rule.$el.find(Selectors.rule_operator).select2($.extend({}, filter?.operatorSelect2Options ?? {}, options.operatorSelect2Options ?? {}));\n        if (options.applyToValue)\n            rule.$el.find(Selectors.rule_value).filter('select').select2($.extend({}, filter?.valueSelect2Options ?? {}, options.valueSelect2Options ?? {}));\n    });\n\n    // Update select2 on change\n    this.on('afterUpdateRuleFilter', function(e, rule) {\n        //***rule.$el.find(Selectors.rule_filter).trigger('change');\n    });\n\n    this.on('beforeDeleteRule', function (e, rule) {\n        if (options.applyToFilter)\n            rule.$el.find(Selectors.rule_filter).select2('destroy');\n        if (options.applyToOperator)\n            rule.$el.find(Selectors.rule_operator).select2('destroy');\n        if (options.applyToValue)\n            rule.$el.find(Selectors.rule_value).filter('select').select2('destroy');\n    });\n}, {\n    applyToFilter: true, // Apply Select2 to filter\n    applyToOperator: false, // Apply Select2 to operator\n    applyToValue: true, // Apply Select2 to value\n    filterSelect2Options: null, // Select2 options for filter\n    operatorSelect2Options: null, // Select2 options for operator\n    valueSelect2Options: null, // Select2 options for value\n});\n\n\n/**\n * @class SqlSupport\n * @memberof module:plugins\n * @description Allows to export rules as a SQL WHERE statement as well as populating the builder from an SQL query.\n * @param {object} [options]\n * @param {boolean} [options.boolean_as_integer=true] - `true` to convert boolean values to integer in the SQL output\n */\nQueryBuilder.define('sql-support', function(options) {\n\n}, {\n    boolean_as_integer: true\n});\n\nQueryBuilder.defaults({\n    // operators for internal -> SQL conversion\n    sqlOperators: {\n        equal: { op: '= ?' },\n        not_equal: { op: '!= ?' },\n        in: { op: 'IN(?)', sep: ', ' },\n        not_in: { op: 'NOT IN(?)', sep: ', ' },\n        less: { op: '< ?' },\n        less_or_equal: { op: '<= ?' },\n        greater: { op: '> ?' },\n        greater_or_equal: { op: '>= ?' },\n        between: { op: 'BETWEEN ?', sep: ' AND ' },\n        not_between: { op: 'NOT BETWEEN ?', sep: ' AND ' },\n        begins_with: { op: 'LIKE ?', mod: '{0}%', escape: '%_' },\n        not_begins_with: { op: 'NOT LIKE ?', mod: '{0}%', escape: '%_' },\n        contains: { op: 'LIKE ?', mod: '%{0}%', escape: '%_' },\n        not_contains: { op: 'NOT LIKE ?', mod: '%{0}%', escape: '%_' },\n        ends_with: { op: 'LIKE ?', mod: '%{0}', escape: '%_' },\n        not_ends_with: { op: 'NOT LIKE ?', mod: '%{0}', escape: '%_' },\n        is_empty: { op: '= \\'\\'' },\n        is_not_empty: { op: '!= \\'\\'' },\n        is_null: { op: 'IS NULL' },\n        is_not_null: { op: 'IS NOT NULL' }\n    },\n\n    // operators for SQL -> internal conversion\n    sqlRuleOperator: {\n        '=': function(v) {\n            return {\n                val: v,\n                op: v === '' ? 'is_empty' : 'equal'\n            };\n        },\n        '!=': function(v) {\n            return {\n                val: v,\n                op: v === '' ? 'is_not_empty' : 'not_equal'\n            };\n        },\n        'LIKE': function(v) {\n            if (v.slice(0, 1) == '%' && v.slice(-1) == '%') {\n                return {\n                    val: v.slice(1, -1),\n                    op: 'contains'\n                };\n            }\n            else if (v.slice(0, 1) == '%') {\n                return {\n                    val: v.slice(1),\n                    op: 'ends_with'\n                };\n            }\n            else if (v.slice(-1) == '%') {\n                return {\n                    val: v.slice(0, -1),\n                    op: 'begins_with'\n                };\n            }\n            else {\n                Utils.error('SQLParse', 'Invalid value for LIKE operator \"{0}\"', v);\n            }\n        },\n        'NOT LIKE': function(v) {\n            if (v.slice(0, 1) == '%' && v.slice(-1) == '%') {\n                return {\n                    val: v.slice(1, -1),\n                    op: 'not_contains'\n                };\n            }\n            else if (v.slice(0, 1) == '%') {\n                return {\n                    val: v.slice(1),\n                    op: 'not_ends_with'\n                };\n            }\n            else if (v.slice(-1) == '%') {\n                return {\n                    val: v.slice(0, -1),\n                    op: 'not_begins_with'\n                };\n            }\n            else {\n                Utils.error('SQLParse', 'Invalid value for NOT LIKE operator \"{0}\"', v);\n            }\n        },\n        'IN': function(v) {\n            return { val: v, op: 'in' };\n        },\n        'NOT IN': function(v) {\n            return { val: v, op: 'not_in' };\n        },\n        '<': function(v) {\n            return { val: v, op: 'less' };\n        },\n        '<=': function(v) {\n            return { val: v, op: 'less_or_equal' };\n        },\n        '>': function(v) {\n            return { val: v, op: 'greater' };\n        },\n        '>=': function(v) {\n            return { val: v, op: 'greater_or_equal' };\n        },\n        'BETWEEN': function(v) {\n            return { val: v, op: 'between' };\n        },\n        'NOT BETWEEN': function(v) {\n            return { val: v, op: 'not_between' };\n        },\n        'IS': function(v) {\n            if (v !== null) {\n                Utils.error('SQLParse', 'Invalid value for IS operator');\n            }\n            return { val: null, op: 'is_null' };\n        },\n        'IS NOT': function(v) {\n            if (v !== null) {\n                Utils.error('SQLParse', 'Invalid value for IS operator');\n            }\n            return { val: null, op: 'is_not_null' };\n        }\n    },\n\n    // statements for internal -> SQL conversion\n    sqlStatements: {\n        'question_mark': function() {\n            var params = [];\n            return {\n                add: function(rule, value) {\n                    params.push(value);\n                    return '?';\n                },\n                run: function() {\n                    return params;\n                }\n            };\n        },\n\n        'numbered': function(char) {\n            if (!char || char.length > 1) char = '$';\n            var index = 0;\n            var params = [];\n            return {\n                add: function(rule, value) {\n                    params.push(value);\n                    index++;\n                    return char + index;\n                },\n                run: function() {\n                    return params;\n                }\n            };\n        },\n\n        'named': function(char) {\n            if (!char || char.length > 1) char = ':';\n            var indexes = {};\n            var params = {};\n            return {\n                add: function(rule, value) {\n                    if (!indexes[rule.field]) indexes[rule.field] = 1;\n                    var key = rule.field + '_' + (indexes[rule.field]++);\n                    params[key] = value;\n                    return char + key;\n                },\n                run: function() {\n                    return params;\n                }\n            };\n        }\n    },\n\n    // statements for SQL -> internal conversion\n    sqlRuleStatement: {\n        'question_mark': function(values) {\n            var index = 0;\n            return {\n                parse: function(v) {\n                    return v == '?' ? values[index++] : v;\n                },\n                esc: function(sql) {\n                    return sql.replace(/\\?/g, '\\'?\\'');\n                }\n            };\n        },\n\n        'numbered': function(values, char) {\n            if (!char || char.length > 1) char = '$';\n            var regex1 = new RegExp('^\\\\' + char + '[0-9]+$');\n            var regex2 = new RegExp('\\\\' + char + '([0-9]+)', 'g');\n            return {\n                parse: function(v) {\n                    return regex1.test(v) ? values[v.slice(1) - 1] : v;\n                },\n                esc: function(sql) {\n                    return sql.replace(regex2, '\\'' + (char == '$' ? '$$' : char) + '$1\\'');\n                }\n            };\n        },\n\n        'named': function(values, char) {\n            if (!char || char.length > 1) char = ':';\n            var regex1 = new RegExp('^\\\\' + char);\n            var regex2 = new RegExp('\\\\' + char + '(' + Object.keys(values).join('|') + ')\\\\b', 'g');\n            return {\n                parse: function(v) {\n                    return regex1.test(v) ? values[v.slice(1)] : v;\n                },\n                esc: function(sql) {\n                    return sql.replace(regex2, '\\'' + (char == '$' ? '$$' : char) + '$1\\'');\n                }\n            };\n        }\n    }\n});\n\n/**\n * @typedef {object} SqlQuery\n * @memberof module:plugins.SqlSupport\n * @property {string} sql\n * @property {object} params\n */\n\nQueryBuilder.extend(/** @lends module:plugins.SqlSupport.prototype */ {\n    /**\n     * Returns rules as a SQL query\n     * @param {boolean|string} [stmt] - use prepared statements: false, 'question_mark', 'numbered', 'numbered(@)', 'named', 'named(@)'\n     * @param {boolean} [nl=false] output with new lines\n     * @param {object} [data] - current rules by default\n     * @returns {module:plugins.SqlSupport.SqlQuery}\n     * @fires module:plugins.SqlSupport.changer:getSQLField\n     * @fires module:plugins.SqlSupport.changer:ruleToSQL\n     * @fires module:plugins.SqlSupport.changer:groupToSQL\n     * @throws UndefinedSQLConditionError, UndefinedSQLOperatorError\n     */\n    getSQL: function(stmt, nl, data) {\n        data = (data === undefined) ? this.getRules() : data;\n\n        if (!data) {\n            return null;\n        }\n\n        nl = !!nl ? '\\n' : ' ';\n        var boolean_as_integer = this.getPluginOptions('sql-support', 'boolean_as_integer');\n\n        if (stmt === true) {\n            stmt = 'question_mark';\n        }\n        if (typeof stmt == 'string') {\n            var config = getStmtConfig(stmt);\n            stmt = this.settings.sqlStatements[config[1]](config[2]);\n        }\n\n        var self = this;\n\n        var sql = (function parse(group) {\n            if (!group.condition) {\n                group.condition = self.settings.default_condition;\n            }\n            if (['AND', 'OR'].indexOf(group.condition.toUpperCase()) === -1) {\n                Utils.error('UndefinedSQLCondition', 'Unable to build SQL query with condition \"{0}\"', group.condition);\n            }\n\n            if (!group.rules) {\n                return '';\n            }\n\n            var parts = [];\n\n            group.rules.forEach(function(rule) {\n                if (rule.rules && rule.rules.length > 0) {\n                    parts.push('(' + nl + parse(rule) + nl + ')' + nl);\n                }\n                else {\n                    var sql = self.settings.sqlOperators[rule.operator];\n                    var ope = self.getOperatorByType(rule.operator);\n                    var value = '';\n\n                    if (sql === undefined) {\n                        Utils.error('UndefinedSQLOperator', 'Unknown SQL operation for operator \"{0}\"', rule.operator);\n                    }\n\n                    if (ope.nb_inputs !== 0) {\n                        if (!(rule.value instanceof Array)) {\n                            rule.value = [rule.value];\n                        }\n\n                        rule.value.forEach(function(v, i) {\n                            if (i > 0) {\n                                value += sql.sep;\n                            }\n\n                            if (rule.type == 'boolean' && boolean_as_integer) {\n                                v = v ? 1 : 0;\n                            }\n                            else if (!stmt && rule.type !== 'integer' && rule.type !== 'double' && rule.type !== 'boolean') {\n                                v = Utils.escapeString(v, sql.escape);\n                            }\n\n                            if (sql.mod) {\n                                v = Utils.fmt(sql.mod, v);\n                            }\n\n                            if (stmt) {\n                                value += stmt.add(rule, v);\n                            }\n                            else {\n                                if (typeof v == 'string') {\n                                    v = '\\'' + v + '\\'';\n                                }\n\n                                value += v;\n                            }\n                        });\n                    }\n\n                    var sqlFn = function(v) {\n                        return sql.op.replace('?', function() {\n                            return v;\n                        });\n                    };\n\n                    /**\n                     * Modifies the SQL field used by a rule\n                     * @event changer:getSQLField\n                     * @memberof module:plugins.SqlSupport\n                     * @param {string} field\n                     * @param {Rule} rule\n                     * @returns {string}\n                     */\n                    var field = self.change('getSQLField', rule.field, rule);\n\n                    var ruleExpression = field + ' ' + sqlFn(value);\n\n                    /**\n                     * Modifies the SQL generated for a rule\n                     * @event changer:ruleToSQL\n                     * @memberof module:plugins.SqlSupport\n                     * @param {string} expression\n                     * @param {Rule} rule\n                     * @param {*} value\n                     * @param {function} valueWrapper - function that takes the value and adds the operator\n                     * @returns {string}\n                     */\n                    parts.push(self.change('ruleToSQL', ruleExpression, rule, value, sqlFn));\n                }\n            });\n\n            var groupExpression = parts.join(' ' + group.condition + nl);\n\n            /**\n             * Modifies the SQL generated for a group\n             * @event changer:groupToSQL\n             * @memberof module:plugins.SqlSupport\n             * @param {string} expression\n             * @param {Group} group\n             * @returns {string}\n             */\n            return self.change('groupToSQL', groupExpression, group);\n        }(data));\n\n        if (stmt) {\n            return {\n                sql: sql,\n                params: stmt.run()\n            };\n        }\n        else {\n            return {\n                sql: sql\n            };\n        }\n    },\n\n    /**\n     * Convert a SQL query to rules\n     * @param {string|module:plugins.SqlSupport.SqlQuery} query\n     * @param {boolean|string} stmt\n     * @returns {object}\n     * @fires module:plugins.SqlSupport.changer:parseSQLNode\n     * @fires module:plugins.SqlSupport.changer:getSQLFieldID\n     * @fires module:plugins.SqlSupport.changer:sqlToRule\n     * @fires module:plugins.SqlSupport.changer:sqlToGroup\n     * @throws MissingLibraryError, SQLParseError, UndefinedSQLOperatorError\n     */\n    getRulesFromSQL: function(query, stmt) {\n        if (!('SQLParser' in window)) {\n            Utils.error('MissingLibrary', 'SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser');\n        }\n\n        var self = this;\n\n        if (typeof query == 'string') {\n            query = { sql: query };\n        }\n\n        if (stmt === true) stmt = 'question_mark';\n        if (typeof stmt == 'string') {\n            var config = getStmtConfig(stmt);\n            stmt = this.settings.sqlRuleStatement[config[1]](query.params, config[2]);\n        }\n\n        if (stmt) {\n            query.sql = stmt.esc(query.sql);\n        }\n\n        if (query.sql.toUpperCase().indexOf('SELECT') !== 0) {\n            query.sql = 'SELECT * FROM table WHERE ' + query.sql;\n        }\n\n        var parsed = SQLParser.parse(query.sql);\n\n        if (!parsed.where) {\n            Utils.error('SQLParse', 'No WHERE clause found');\n        }\n\n        /**\n         * Custom parsing of an AST node generated by SQLParser, you can return a sub-part of the tree, or a well formed group or rule JSON\n         * @event changer:parseSQLNode\n         * @memberof module:plugins.SqlSupport\n         * @param {object} AST node\n         * @returns {object} tree, rule or group\n         */\n        var data = self.change('parseSQLNode', parsed.where.conditions);\n\n        // a plugin returned a group\n        if ('rules' in data && 'condition' in data) {\n            return data;\n        }\n\n        // a plugin returned a rule\n        if ('id' in data && 'operator' in data && 'value' in data) {\n            return {\n                condition: this.settings.default_condition,\n                rules: [data]\n            };\n        }\n\n        // create root group\n        var out = self.change('sqlToGroup', {\n            condition: this.settings.default_condition,\n            rules: []\n        }, data);\n\n        // keep track of current group\n        var curr = out;\n\n        (function flatten(data, i) {\n            if (data === null) {\n                return;\n            }\n\n            // allow plugins to manually parse or handle special cases\n            data = self.change('parseSQLNode', data);\n\n            // a plugin returned a group\n            if ('rules' in data && 'condition' in data) {\n                curr.rules.push(data);\n                return;\n            }\n\n            // a plugin returned a rule\n            if ('id' in data && 'operator' in data && 'value' in data) {\n                curr.rules.push(data);\n                return;\n            }\n\n            // data must be a SQL parser node\n            if (!('left' in data) || !('right' in data) || !('operation' in data)) {\n                Utils.error('SQLParse', 'Unable to parse WHERE clause');\n            }\n\n            // it's a node\n            if (['AND', 'OR'].indexOf(data.operation.toUpperCase()) !== -1) {\n                // create a sub-group if the condition is not the same and it's not the first level\n\n                /**\n                 * Given an existing group and an AST node, determines if a sub-group must be created\n                 * @event changer:sqlGroupsDistinct\n                 * @memberof module:plugins.SqlSupport\n                 * @param {boolean} create - true by default if the group condition is different\n                 * @param {object} group\n                 * @param {object} AST\n                 * @param {int} current group level\n                 * @returns {boolean}\n                 */\n                var createGroup = self.change('sqlGroupsDistinct', i > 0 && curr.condition != data.operation.toUpperCase(), curr, data, i);\n\n                if (createGroup) {\n                    /**\n                     * Modifies the group generated from the SQL expression (this is called before the group is filled with rules)\n                     * @event changer:sqlToGroup\n                     * @memberof module:plugins.SqlSupport\n                     * @param {object} group\n                     * @param {object} AST\n                     * @returns {object}\n                     */\n                    var group = self.change('sqlToGroup', {\n                        condition: self.settings.default_condition,\n                        rules: []\n                    }, data);\n\n                    curr.rules.push(group);\n                    curr = group;\n                }\n\n                curr.condition = data.operation.toUpperCase();\n                i++;\n\n                // some magic !\n                var next = curr;\n                flatten(data.left, i);\n\n                curr = next;\n                flatten(data.right, i);\n            }\n            // it's a leaf\n            else {\n                if ($.isPlainObject(data.right.value)) {\n                    Utils.error('SQLParse', 'Value format not supported for {0}.', data.left.value);\n                }\n\n                // convert array\n                var value;\n                if (Array.isArray(data.right.value)) {\n                    value = data.right.value.map(function(v) {\n                        return v.value;\n                    });\n                }\n                else {\n                    value = data.right.value;\n                }\n\n                // get actual values\n                if (stmt) {\n                    if (Array.isArray(value)) {\n                        value = value.map(stmt.parse);\n                    }\n                    else {\n                        value = stmt.parse(value);\n                    }\n                }\n\n                // convert operator\n                var operator = data.operation.toUpperCase();\n                if (operator == '<>') {\n                    operator = '!=';\n                }\n\n                var sqlrl = self.settings.sqlRuleOperator[operator];\n                if (sqlrl === undefined) {\n                    Utils.error('UndefinedSQLOperator', 'Invalid SQL operation \"{0}\".', data.operation);\n                }\n\n                var opVal = sqlrl.call(this, value, data.operation);\n\n                // find field name\n                var field;\n                if ('values' in data.left) {\n                    field = data.left.values.join('.');\n                }\n                else if ('value' in data.left) {\n                    field = data.left.value;\n                }\n                else {\n                    Utils.error('SQLParse', 'Cannot find field name in {0}', JSON.stringify(data.left));\n                }\n\n                // unescape chars declared by the operator\n                var finalValue = opVal.val;\n                var sql = self.settings.sqlOperators[opVal.op];\n                if (!stmt && sql && sql.escape) {\n                    var searchChars = sql.escape.split('').map(function(c) {\n                        return '\\\\\\\\' + c;\n                    }).join('|');\n                    finalValue = finalValue\n                        .replace(new RegExp('(' + searchChars + ')', 'g'), function(s) {\n                            return s[1];\n                        });\n                }\n\n                var id = self.getSQLFieldID(field, value);\n\n                /**\n                 * Modifies the rule generated from the SQL expression\n                 * @event changer:sqlToRule\n                 * @memberof module:plugins.SqlSupport\n                 * @param {object} rule\n                 * @param {object} AST\n                 * @returns {object}\n                 */\n                var rule = self.change('sqlToRule', {\n                    id: id,\n                    field: field,\n                    operator: opVal.op,\n                    value: finalValue\n                }, data);\n\n                curr.rules.push(rule);\n            }\n        }(data, 0));\n\n        return out;\n    },\n\n    /**\n     * Sets the builder's rules from a SQL query\n     * @see module:plugins.SqlSupport.getRulesFromSQL\n     */\n    setRulesFromSQL: function(query, stmt) {\n        this.setRules(this.getRulesFromSQL(query, stmt));\n    },\n\n    /**\n     * Returns a filter identifier from the SQL field.\n     * Automatically use the only one filter with a matching field, fires a changer otherwise.\n     * @param {string} field\n     * @param {*} value\n     * @fires module:plugins.SqlSupport:changer:getSQLFieldID\n     * @returns {string}\n     * @private\n     */\n    getSQLFieldID: function(field, value) {\n        var matchingFilters = this.filters.filter(function(filter) {\n            return filter.field.toLowerCase() === field.toLowerCase();\n        });\n\n        var id;\n        if (matchingFilters.length === 1) {\n            id = matchingFilters[0].id;\n        }\n        else {\n            /**\n             * Returns a filter identifier from the SQL field\n             * @event changer:getSQLFieldID\n             * @memberof module:plugins.SqlSupport\n             * @param {string} field\n             * @param {*} value\n             * @returns {string}\n             */\n            id = this.change('getSQLFieldID', field, value);\n        }\n\n        return id;\n    }\n});\n\n/**\n * Parses the statement configuration\n * @memberof module:plugins.SqlSupport\n * @param {string} stmt\n * @returns {Array} null, mode, option\n * @private\n */\nfunction getStmtConfig(stmt) {\n    var config = stmt.match(/(question_mark|numbered|named)(?:\\((.)\\))?/);\n    if (!config) config = [null, 'question_mark', undefined];\n    return config;\n}\n\n\n/**\n * @class UniqueFilter\n * @memberof module:plugins\n * @description Allows to define some filters as \"unique\": ie which can be used for only one rule, globally or in the same group.\n */\nQueryBuilder.define('unique-filter', function() {\n    this.status.used_filters = {};\n\n    this.on('afterUpdateRuleFilter', this.updateDisabledFilters);\n    this.on('afterDeleteRule', this.updateDisabledFilters);\n    this.on('afterCreateRuleFilters', this.applyDisabledFilters);\n    this.on('afterReset', this.clearDisabledFilters);\n    this.on('afterClear', this.clearDisabledFilters);\n\n    // Ensure that the default filter is not already used if unique\n    this.on('getDefaultFilter.filter', function(e, model) {\n        var self = e.builder;\n\n        self.updateDisabledFilters();\n\n        if (e.value.id in self.status.used_filters) {\n            var found = self.filters.some(function(filter) {\n                if (!(filter.id in self.status.used_filters) || self.status.used_filters[filter.id].length > 0 && self.status.used_filters[filter.id].indexOf(model.parent) === -1) {\n                    e.value = filter;\n                    return true;\n                }\n            });\n\n            if (!found) {\n                Utils.error(false, 'UniqueFilter', 'No more non-unique filters available');\n                e.value = undefined;\n            }\n        }\n    });\n});\n\nQueryBuilder.extend(/** @lends module:plugins.UniqueFilter.prototype */ {\n    /**\n     * Updates the list of used filters\n     * @param {$.Event} [e]\n     * @private\n     */\n    updateDisabledFilters: function(e) {\n        var self = e ? e.builder : this;\n\n        self.status.used_filters = {};\n\n        if (!self.model) {\n            return;\n        }\n\n        // get used filters\n        (function walk(group) {\n            group.each(function(rule) {\n                if (rule.filter && rule.filter.unique) {\n                    if (!self.status.used_filters[rule.filter.id]) {\n                        self.status.used_filters[rule.filter.id] = [];\n                    }\n                    if (rule.filter.unique == 'group') {\n                        self.status.used_filters[rule.filter.id].push(rule.parent);\n                    }\n                }\n            }, function(group) {\n                walk(group);\n            });\n        }(self.model.root));\n\n        self.applyDisabledFilters(e);\n    },\n\n    /**\n     * Clear the list of used filters\n     * @param {$.Event} [e]\n     * @private\n     */\n    clearDisabledFilters: function(e) {\n        var self = e ? e.builder : this;\n\n        self.status.used_filters = {};\n\n        self.applyDisabledFilters(e);\n    },\n\n    /**\n     * Disabled filters depending on the list of used ones\n     * @param {$.Event} [e]\n     * @private\n     */\n    applyDisabledFilters: function(e) {\n        var self = e ? e.builder : this;\n\n        // re-enable everything\n        self.$el.find(QueryBuilder.selectors.filter_container + ' option').prop('disabled', false);\n\n        // disable some\n        $.each(self.status.used_filters, function(filterId, groups) {\n            if (groups.length === 0) {\n                self.$el.find(QueryBuilder.selectors.filter_container + ' option[value=\"' + filterId + '\"]:not(:selected)').prop('disabled', true);\n            }\n            else {\n                groups.forEach(function(group) {\n                    group.each(function(rule) {\n                        rule.$el.find(QueryBuilder.selectors.filter_container + ' option[value=\"' + filterId + '\"]:not(:selected)').prop('disabled', true);\n                    });\n                });\n            }\n        });\n\n        // update Selectpicker\n        if (self.settings.plugins && self.settings.plugins['bt-selectpicker']) {\n            self.$el.find(QueryBuilder.selectors.rule_filter).selectpicker('render');\n        }\n    }\n});\n\n\n/*!\n * jQuery QueryBuilder 2.7.2\n * Locale: English (en)\n * Author: Damien \"Mistic\" Sorel, http://www.strangeplanet.fr\n * Licensed under MIT (https://opensource.org/licenses/MIT)\n */\n\nQueryBuilder.regional['en'] = {\n  \"__locale\": \"English (en)\",\n  \"__author\": \"Damien \\\"Mistic\\\" Sorel, http://www.strangeplanet.fr\",\n  \"add_rule\": \"Add rule\",\n  \"add_group\": \"Add group\",\n  \"delete_rule\": \"Delete\",\n  \"delete_group\": \"Delete\",\n  \"conditions\": {\n    \"AND\": \"AND\",\n    \"OR\": \"OR\"\n  },\n  \"operators\": {\n    \"equal\": \"equal\",\n    \"not_equal\": \"not equal\",\n    \"in\": \"in\",\n    \"not_in\": \"not in\",\n    \"less\": \"less\",\n    \"less_or_equal\": \"less or equal\",\n    \"greater\": \"greater\",\n    \"greater_or_equal\": \"greater or equal\",\n    \"between\": \"between\",\n    \"not_between\": \"not between\",\n    \"begins_with\": \"begins with\",\n    \"not_begins_with\": \"doesn't begin with\",\n    \"contains\": \"contains\",\n    \"not_contains\": \"doesn't contain\",\n    \"ends_with\": \"ends with\",\n    \"not_ends_with\": \"doesn't end with\",\n    \"is_empty\": \"is empty\",\n    \"is_not_empty\": \"is not empty\",\n    \"is_null\": \"is null\",\n    \"is_not_null\": \"is not null\"\n  },\n  \"errors\": {\n    \"no_filter\": \"No filter selected\",\n    \"empty_group\": \"The group is empty\",\n    \"radio_empty\": \"No value selected\",\n    \"checkbox_empty\": \"No value selected\",\n    \"select_empty\": \"No value selected\",\n    \"string_empty\": \"Empty value\",\n    \"string_exceed_min_length\": \"Must contain at least {0} characters\",\n    \"string_exceed_max_length\": \"Must not contain more than {0} characters\",\n    \"string_invalid_format\": \"Invalid format ({0})\",\n    \"number_nan\": \"Not a number\",\n    \"number_not_integer\": \"Not an integer\",\n    \"number_not_double\": \"Not a real number\",\n    \"number_exceed_min\": \"Must be greater than {0}\",\n    \"number_exceed_max\": \"Must be lower than {0}\",\n    \"number_wrong_step\": \"Must be a multiple of {0}\",\n    \"number_between_invalid\": \"Invalid values, {0} is greater than {1}\",\n    \"datetime_empty\": \"Empty value\",\n    \"datetime_invalid\": \"Invalid date format ({0})\",\n    \"datetime_exceed_min\": \"Must be after {0}\",\n    \"datetime_exceed_max\": \"Must be before {0}\",\n    \"datetime_between_invalid\": \"Invalid values, {0} is greater than {1}\",\n    \"boolean_not_valid\": \"Not a boolean\",\n    \"operator_not_multiple\": \"Operator \\\"{1}\\\" cannot accept multiple values\"\n  },\n  \"invert\": \"Invert\",\n  \"NOT\": \"NOT\"\n};\n\nQueryBuilder.defaults({ lang_code: 'en' });\nreturn QueryBuilder;\n\n}));\n"],"mappings":"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","ignoreList":[]}